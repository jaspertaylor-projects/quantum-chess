(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],[,,,,,,,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},,function(e,n,t){},function(e,n,t){"use strict";t.r(n);var a=t(1),i=t.n(a),r=t(6),s=t.n(r),c=(t(11),t(12),t(2)),u=(t(13),t(0));function o(e){var n=e.number,t=e.image;return n%2===0?Object(u.jsx)("div",{className:"tile black-tile",children:t&&Object(u.jsx)("div",{style:{backgroundImage:"url(".concat(t,")")},className:"chess-piece"})}):Object(u.jsx)("div",{className:"tile white-tile",children:t&&Object(u.jsx)("div",{style:{backgroundImage:"url(".concat(t,")")},className:"chess-piece"})})}t(15);var f,l,v=t(3),y=t(4),h=["a","b","c","d","e","f","g","h"],b=[1,2,3,4,5,6,7,8],d=100;!function(e){e[e.WHITE=0]="WHITE",e[e.BLACK=1]="BLACK"}(f||(f={})),function(e){e[e.PAWN=0]="PAWN",e[e.BISHOP=1]="BISHOP",e[e.NIGHT=2]="NIGHT",e[e.ROOK=3]="ROOK",e[e.QUEEN=4]="QUEEN",e[e.KING=5]="KING"}(l||(l={}));for(var p=[],g=0;g<2;g++){var x=0===g?"b":"w",m=0===g?f.BLACK:f.WHITE,I=0===g?7:0;p.push({image:"assets/images/rook_".concat(x,".png"),x:0,y:I,team:m,type:l.ROOK,enPassantable:!1,canCastle:!0}),p.push({image:"assets/images/rook_".concat(x,".png"),x:7,y:I,team:m,type:l.ROOK,enPassantable:!1,canCastle:!0}),p.push({image:"assets/images/night_".concat(x,".png"),x:1,y:I,team:m,type:l.NIGHT,enPassantable:!1}),p.push({image:"assets/images/night_".concat(x,".png"),x:6,y:I,team:m,type:l.NIGHT,enPassantable:!1}),p.push({image:"assets/images/bishop_".concat(x,".png"),x:2,y:I,team:m,type:l.BISHOP,enPassantable:!1}),p.push({image:"assets/images/bishop_".concat(x,".png"),x:5,y:I,team:m,type:l.BISHOP,enPassantable:!1}),p.push({image:"assets/images/queen_".concat(x,".png"),x:3,y:I,team:m,type:l.QUEEN,enPassantable:!1}),p.push({image:"assets/images/king_".concat(x,".png"),x:4,y:I,team:m,type:l.KING,enPassantable:!1,canCastle:!0})}for(var M=0;M<h.length;M++)p.push({image:"assets/images/pawn_b.png",x:M,y:6,team:f.BLACK,type:l.PAWN,enPassantable:!1});for(var O=0;O<h.length;O++)p.push({image:"assets/images/pawn_w.png",x:O,y:1,team:f.WHITE,type:l.PAWN,enPassantable:!1});function j(e,n,t){return!!t.find((function(t){return t.x===e&&t.y===n}))}function k(e,n,t,a){var i=a.find((function(t){return t.x===e&&t.y===n}));return!(!i||i.team!==t)}function C(e,n,t,a,i,r){var s=i===f.WHITE?f.BLACK:f.WHITE,c=i===f.WHITE?1:-1;return n===a-c&&e===t&&!j(t,a,r)||!(t!==e+1&&t!==e-1||n!==a-c||!k(t,a,s,r))}var K=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,[{key:"isMyKingInCheck",value:function(e,n,t){for(var a=e===f.WHITE?f.BLACK:f.WHITE,i=n.find((function(n){return n.team===e&&n.type===l.KING})),r=0;r<n.length;r++){var s=n[r];if(i&&s.team===a){var c=i.x+t-s.x,u=i.y-s.y;switch(s.type){case l.PAWN:if(C(s.x,s.y,i.x+t,i.y,s.team,n))return!0;break;case l.NIGHT:if(H(s.x,s.y,c,u,n))return!0;break;case l.BISHOP:if(E(s.x,s.y,c,u,n))return!0;break;case l.ROOK:if(P(s.x,s.y,c,u,n))return!0;break;case l.QUEEN:if(T(s.x,s.y,c,u,n))return!0;break;case l.KING:if(N(s.x,s.y,c,u,n))return!0}}}return!1}}]),e}();function P(e,n,t,a,i){if(0===t||0===a){if(0===t){var r=function(){for(var t=Math.sign(a),r=function(a){if(i.find((function(i){return i.x===e&&i.y===n+a*t})))return{v:{v:!1}}},s=1;s<Math.abs(a);s++){var c=r(s);if("object"===typeof c)return c.v}return{v:!0}}();if("object"===typeof r)return r.v}if(0===a){var s=function(){for(var a=Math.sign(t),r=function(t){if(i.find((function(i){return i.x===e+t*a&&i.y===n})))return{v:{v:!1}}},s=1;s<Math.abs(t);s++){var c=r(s);if("object"===typeof c)return c.v}return{v:!0}}();if("object"===typeof s)return s.v}}return!1}function E(e,n,t,a,i){if(Math.abs(t)===Math.abs(a)){var r=function(){for(var r=Math.sign(t),s=Math.sign(a),c=function(t){if(i.find((function(a){return a.x===e+t*r&&a.y===n+t*s})))return{v:{v:!1}}},u=1;u<Math.abs(t);u++){var o=c(u);if("object"===typeof o)return o.v}return{v:!0}}();if("object"===typeof r)return r.v}return!1}function H(e,n,t,a,i){return 1===Math.abs(t)&&2===Math.abs(a)||2===Math.abs(t)&&1===Math.abs(a)}function T(e,n,t,a,i){return P(e,n,t,a,i)||E(e,n,t,a,i)}function N(e,n,t,a,i){return Math.abs(t)<2&&Math.abs(a)<2}var W=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,[{key:"noCastle",value:function(e,n,t){var a=t.find((function(t){return t.x===e&&t.y===n}));a&&(a.canCastle=!1)}},{key:"takePiece",value:function(e,n,t,a){var i=a.find((function(a){return a.x===e&&a.y===n&&a.team!==t}));i&&(i.taken=!0)}},{key:"endMove",value:function(e,n,t,a,i,r,s){k(t,a,i,r)||(this.noCastle(e,n,r),this.takePiece(t,a,i,r),function(e){e.forEach((function(e){e.enPassantable=!1}))}(r),s.value=!0)}},{key:"isValidMove",value:function(e,n,t,a,i,r,s,c){if(r!==c)return!1;if(e===t&&n===a)return!1;if(t<0||a<0||t>7||a>7)return!1;var u={value:!1},o=t-e,v=a-n;switch(i){case l.PAWN:if(function(e,n,t,a,i,r){var s=i===f.WHITE?1:6,c=i===f.WHITE?1:-1;return n===s&&e===t&&n===a-2*c&&!j(t,a,r)&&!j(t,a-c,r)}(e,n,t,a,r,s))return function(e,n,t){t.forEach((function(t){t.x===e&&t.y===n?t.enPassantable=!0:t.enPassantable=!1}))}(e,n,s),!0;C(e,n,t,a,r,s)&&this.endMove(e,n,t,a,r,s,u),function(e,n,t,a,i,r){var s=i===f.WHITE?f.BLACK:f.WHITE,c=i===f.WHITE?1:-1;return!(t!==e+1&&t!==e-1||n!==a-c||!k(t,n,s,r)||!function(e,n,t){var a=t.find((function(t){return t.x===e&&t.y===n}));return!(!a||!a.enPassantable)&&a.enPassantable}(t,n,r))}(e,n,t,a,r,s)&&this.endMove(-1,-1,t,n,r,s,u);break;case l.NIGHT:H(0,0,o,v)&&this.endMove(e,n,t,a,r,s,u);break;case l.BISHOP:E(e,n,o,v,s)&&this.endMove(e,n,t,a,r,s,u);break;case l.ROOK:P(e,n,o,v,s)&&this.endMove(e,n,t,a,r,s,u);break;case l.QUEEN:T(e,n,o,v,s)&&this.endMove(e,n,t,a,r,s,u);break;case l.KING:if(N(0,0,o,v)&&this.endMove(e,n,t,a,r,s,u),function(e,n,t,a,i,r){var s=new K,c=r.find((function(e){return e.type===l.KING&&e.team===i}));if(i===f.WHITE){if(!0===(null===c||void 0===c?void 0:c.canCastle)&&-2===t){var u=r.find((function(e){return 0===e.x&&0===e.y}));if((null===u||void 0===u?void 0:u.canCastle)&&!s.isMyKingInCheck(i,r,0)&&!s.isMyKingInCheck(i,r,-1)&&!s.isMyKingInCheck(i,r,-2)&&P(c.x,c.y,-4,0,r))return!0}if(!0===(null===c||void 0===c?void 0:c.canCastle)&&2===t){var o=r.find((function(e){return 7===e.x&&0===e.y}));if((null===o||void 0===o?void 0:o.canCastle)&&!s.isMyKingInCheck(i,r,0)&&!s.isMyKingInCheck(i,r,1)&&!s.isMyKingInCheck(i,r,2)&&P(c.x,c.y,3,0,r))return!0}}if(i===f.BLACK){if(!0===(null===c||void 0===c?void 0:c.canCastle)&&-2===t){var v=r.find((function(e){return 0===e.x&&7===e.y}));if((null===v||void 0===v?void 0:v.canCastle)&&!s.isMyKingInCheck(i,r,0)&&!s.isMyKingInCheck(i,r,-1)&&!s.isMyKingInCheck(i,r,-2)&&P(c.x,c.y,-4,0,r))return!0}if(!0===(null===c||void 0===c?void 0:c.canCastle)&&2===t){var y=r.find((function(e){return 7===e.x&&7===e.y}));if((null===y||void 0===y?void 0:y.canCastle)&&!s.isMyKingInCheck(i,r,0)&&!s.isMyKingInCheck(i,r,1)&&!s.isMyKingInCheck(i,r,2))return P(c.x,c.y,3,0,r),!0}}return!1}(0,0,o,0,c,s)){if(c===f.WHITE){if(-2===o){var y=s.find((function(e){return 0===e.x&&0===e.y}));y&&(y.teleported=!0)}if(2===o){var h=s.find((function(e){return 7===e.x&&0===e.y}));h&&(h.teleported=!0)}}if(c===f.BLACK){if(-2===o){var b=s.find((function(e){return 0===e.x&&7===e.y}));b&&(b.teleported=!0)}if(2===o){var d=s.find((function(e){return 7===e.x&&7===e.y}));d&&(d.teleported=!0)}}this.endMove(e,n,t,a,r,s,u)}}return u.value}}]),e}();function B(){var e=Object(a.useState)(null),n=Object(c.a)(e,2),t=n[0],i=n[1],r=Object(a.useState)(0),s=Object(c.a)(r,2),l=s[0],v=s[1],y=Object(a.useState)(0),g=Object(c.a)(y,2),x=g[0],m=g[1],I=Object(a.useState)(p),M=Object(c.a)(I,2),O=M[0],j=M[1],k=Object(a.useState)(f.WHITE),C=Object(c.a)(k,2),P=C[0],E=C[1],H=Object(a.useRef)(null),T=new W,N=new K;function B(){t&&(t.style.position="relative",t.style.removeProperty("left"),t.style.removeProperty("top"))}function A(e){var n=H.current;if(t&&n){var a=Math.floor((e.clientX-n.offsetLeft)/d),r=Math.abs(Math.ceil((e.clientY-n.offsetTop-800)/d)),s=O.find((function(e){return e.x===l&&e.y===x}));if(s){var c=function(){var e=[];return O.forEach((function(n){return e.push({image:n.image,x:n.x,y:n.y,team:n.team,type:n.type,enPassantable:n.enPassantable})})),e}();if(T.isValidMove(l,x,a,r,s.type,s.team,O,P)){var u=O.find((function(e){return!0===e.taken}));u&&function(e){var n=O.indexOf(e);O.splice(n,1)}(u);var o=O.find((function(e){return!0===e.teleported}));o&&function(e){var n=0;n=7===e.x?-2:3,e.x=e.x+n,e.teleported=!1}(o);var v=O.indexOf(s);s.x=a,s.y=r,O[v]=s,N.isMyKingInCheck(s.team,O,0)?(j(c),B()):(j(O),function(){var e=P===f.WHITE?f.BLACK:f.WHITE;E(e)}())}else B()}}i(null)}for(var L=[],w=function(e){for(var n=function(n){var t=n+e,a=O.find((function(t){return t.x===n&&t.y===e})),i=a?a.image:void 0;L.push(Object(u.jsx)(o,{image:i,number:t},"".concat(n,", ").concat(e)))},t=0;t<h.length;t++)n(t)},G=b.length-1;G>=0;G--)w(G);return Object(u.jsx)("div",{ref:H,onMouseUp:function(e){return A(e)},onMouseMove:function(e){return function(e){var n=H.current;if(t&&n){var a=e.clientX-50,i=e.clientY-50;t.style.position="absolute",t.style.left="".concat(a,"px"),t.style.top="".concat(i,"px")}}(e)},onMouseDown:function(e){return function(e){var n=H.current,t=e.target;if(t.classList.contains("chess-piece")&&n){v(Math.floor((e.clientX-n.offsetLeft)/d)),m(Math.abs(Math.ceil((e.clientY-n.offsetTop-800)/d)));var a=e.clientX-50,r=e.clientY- -50;t.style.position="absolute",t.style.left="".concat(a,"px"),t.style.top="".concat(r,"px"),i(t)}}(e)},id:"chessboard",children:L})}var A=function(){return Object(u.jsx)("div",{id:"App",children:Object(u.jsx)(B,{})})},L=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,17)).then((function(n){var t=n.getCLS,a=n.getFID,i=n.getFCP,r=n.getLCP,s=n.getTTFB;t(e),a(e),i(e),r(e),s(e)}))};s.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(A,{})}),document.getElementById("root")),L()}],[[16,1,2]]]);
//# sourceMappingURL=main.5e851d0f.chunk.js.map