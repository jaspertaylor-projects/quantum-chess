{"ast":null,"code":"import { PieceType, TeamType } from \"../constants\";\nimport { setEnPassant, checkEnPassant, unsetEnPassant } from \"./epRef\";\nexport default class Referee {\n  pawnIsBlockaded(x, y, boardState) {\n    const piece = boardState.find(p => p.x === x && p.y === y);\n    const occupied = piece ? true : false;\n    return occupied;\n  }\n\n  takePiece(x, y, boardState) {\n    const piece = boardState.find(p => p.x === x && p.y === y);\n\n    if (piece) {\n      piece.taken = true;\n    }\n  }\n\n  isFriendlyPiece(x, y, team, boardState) {\n    const piece = boardState.find(p => p.x === x && p.y === y);\n    const occupied = piece && piece.team === team ? true : false;\n    return occupied;\n  }\n\n  endMove(x, y, team, boardState, valid) {\n    if (!this.isFriendlyPiece(x, y, team, boardState)) {\n      this.takePiece(x, y, boardState);\n      unsetEnPassant(boardState);\n      valid = true;\n      console.log('validity here', valid);\n    }\n  }\n\n  isValidMove(px, py, x, y, type, team, boardState) {\n    const enemyTeam = team === TeamType.WHITE ? TeamType.BLACK : TeamType.WHITE;\n    const valid = false; //PAWN LOGIC \n    //May want to put each piece in different function\n\n    if (type === PieceType.PAWN) {\n      const startingRow = team === TeamType.WHITE ? 1 : 6;\n      const increment = team === TeamType.WHITE ? 1 : -1;\n      console.log(px, py, x, y, increment); // Moving Logic\n\n      if (py === startingRow && px === x && py === y - 2 * increment) {\n        if (!this.pawnIsBlockaded(x, y, boardState) && !this.pawnIsBlockaded(x, y - increment, boardState)) {\n          setEnPassant(px, py, boardState);\n          return true;\n        }\n      }\n\n      if (py === y - increment && px === x) {\n        if (!this.pawnIsBlockaded(x, y, boardState)) {\n          unsetEnPassant(boardState);\n          return true;\n        }\n      } // ATTACK LOGIC\n\n\n      if ((x === px + 1 || x === px - 1) && py === y - increment && this.isFriendlyPiece(x, y, enemyTeam, boardState)) {\n        this.endMove(x, y, team, boardState, valid);\n      }\n\n      if ((x === px + 1 || x === px - 1) && py === y - increment && this.isFriendlyPiece(x, py, enemyTeam, boardState)) {\n        if (checkEnPassant(x, py, boardState)) {\n          this.endMove(x, py, team, boardState, valid);\n        }\n      }\n    } // NIGHT LOGIC \n\n\n    if (type === PieceType.NIGHT) {\n      if ((px === x + 1 || px === x - 1) && (py === y + 2 || py === y - 2) || (py === y + 1 || py === y - 1) && (px === x + 2 || px === x - 2)) {\n        this.endMove(x, y, team, boardState, valid);\n      }\n    }\n\n    return valid;\n  }\n\n}","map":{"version":3,"sources":["/home/jaybird/Coding Projects/Chess4/chess/src/referee/Referee.ts"],"names":["PieceType","TeamType","setEnPassant","checkEnPassant","unsetEnPassant","Referee","pawnIsBlockaded","x","y","boardState","piece","find","p","occupied","takePiece","taken","isFriendlyPiece","team","endMove","valid","console","log","isValidMove","px","py","type","enemyTeam","WHITE","BLACK","PAWN","startingRow","increment","NIGHT"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAA2C,cAA3C;AACA,SAASC,YAAT,EAAwBC,cAAxB,EAAwCC,cAAxC,QAA6D,SAA7D;AAEA,eAAe,MAAMC,OAAN,CAAa;AACxBC,EAAAA,eAAe,CAACC,CAAD,EAAaC,CAAb,EAAwBC,UAAxB,EAAwD;AACnE,UAAMC,KAAK,GAAGD,UAAU,CAACE,IAAX,CAAgBC,CAAC,IAAIA,CAAC,CAACL,CAAF,KAAQA,CAAR,IAAaK,CAAC,CAACJ,CAAF,KAAQA,CAA1C,CAAd;AACA,UAAMK,QAAQ,GAAIH,KAAK,GAAG,IAAH,GAAU,KAAjC;AACA,WAAOG,QAAP;AACH;;AACDC,EAAAA,SAAS,CAACP,CAAD,EAAaC,CAAb,EAAwBC,UAAxB,EAA8C;AACnD,UAAMC,KAAK,GAAGD,UAAU,CAACE,IAAX,CAAgBC,CAAC,IAAIA,CAAC,CAACL,CAAF,KAAQA,CAAR,IAAaK,CAAC,CAACJ,CAAF,KAAQA,CAA1C,CAAd;;AACA,QAAIE,KAAJ,EAAW;AACPA,MAAAA,KAAK,CAACK,KAAN,GAAc,IAAd;AACH;AACJ;;AACDC,EAAAA,eAAe,CAACT,CAAD,EAAaC,CAAb,EAAwBS,IAAxB,EAAyCR,UAAzC,EAAyE;AACpF,UAAMC,KAAK,GAAGD,UAAU,CAACE,IAAX,CAAgBC,CAAC,IAAIA,CAAC,CAACL,CAAF,KAAQA,CAAR,IAAaK,CAAC,CAACJ,CAAF,KAAQA,CAA1C,CAAd;AACA,UAAMK,QAAQ,GAAIH,KAAK,IAAIA,KAAK,CAACO,IAAN,KAAeA,IAAxB,GAA+B,IAA/B,GAAsC,KAAxD;AACA,WAAOJ,QAAP;AACH;;AAEDK,EAAAA,OAAO,CAACX,CAAD,EAAaC,CAAb,EAAwBS,IAAxB,EAAyCR,UAAzC,EAAgEU,KAAhE,EAAgF;AACnF,QAAI,CAAC,KAAKH,eAAL,CAAqBT,CAArB,EAAwBC,CAAxB,EAA2BS,IAA3B,EAAiCR,UAAjC,CAAL,EAAkD;AAC9C,WAAKK,SAAL,CAAeP,CAAf,EAAkBC,CAAlB,EAAqBC,UAArB;AACAL,MAAAA,cAAc,CAACK,UAAD,CAAd;AACAU,MAAAA,KAAK,GAAG,IAAR;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA8BF,KAA9B;AACH;AACJ;;AACDG,EAAAA,WAAW,CAACC,EAAD,EAAcC,EAAd,EAA2BjB,CAA3B,EAAuCC,CAAvC,EAAmDiB,IAAnD,EAAqER,IAArE,EAAsFR,UAAtF,EAA4G;AACnH,UAAMiB,SAAS,GAAGT,IAAI,KAAKhB,QAAQ,CAAC0B,KAAlB,GAA0B1B,QAAQ,CAAC2B,KAAnC,GAA2C3B,QAAQ,CAAC0B,KAAtE;AACA,UAAMR,KAAK,GAAG,KAAd,CAFmH,CAGnH;AACA;;AACA,QAAIM,IAAI,KAAKzB,SAAS,CAAC6B,IAAvB,EAA4B;AACxB,YAAMC,WAAW,GAAGb,IAAI,KAAKhB,QAAQ,CAAC0B,KAAlB,GAA0B,CAA1B,GAA8B,CAAlD;AACA,YAAMI,SAAS,GAAGd,IAAI,KAAKhB,QAAQ,CAAC0B,KAAlB,GAA0B,CAA1B,GAA8B,CAAE,CAAlD;AACAP,MAAAA,OAAO,CAACC,GAAR,CAAYE,EAAZ,EAAgBC,EAAhB,EAAoBjB,CAApB,EAAuBC,CAAvB,EAA0BuB,SAA1B,EAHwB,CAIxB;;AACA,UAAKP,EAAE,KAAKM,WAAP,IAAsBP,EAAE,KAAKhB,CAA9B,IAAqCiB,EAAE,KAAKhB,CAAC,GAAG,IAAIuB,SAAxD,EAAmE;AAC/D,YAAI,CAAC,KAAKzB,eAAL,CAAqBC,CAArB,EAAwBC,CAAxB,EAA2BC,UAA3B,CAAD,IAA2C,CAAC,KAAKH,eAAL,CAAqBC,CAArB,EAAwBC,CAAC,GAAGuB,SAA5B,EAAuCtB,UAAvC,CAAhD,EAAmG;AAC/FP,UAAAA,YAAY,CAACqB,EAAD,EAAKC,EAAL,EAASf,UAAT,CAAZ;AACA,iBAAO,IAAP;AACH;AACJ;;AACD,UAAIe,EAAE,KAAKhB,CAAC,GAAGuB,SAAX,IAAwBR,EAAE,KAAKhB,CAAnC,EAAqC;AACjC,YAAI,CAAC,KAAKD,eAAL,CAAqBC,CAArB,EAAwBC,CAAxB,EAA2BC,UAA3B,CAAL,EAA4C;AACxCL,UAAAA,cAAc,CAACK,UAAD,CAAd;AACA,iBAAO,IAAP;AACH;AACJ,OAhBuB,CAiBxB;;;AACA,UAAI,CAACF,CAAC,KAAKgB,EAAE,GAAG,CAAX,IAAgBhB,CAAC,KAAKgB,EAAE,GAAE,CAA3B,KAAkCC,EAAE,KAAKhB,CAAC,GAAGuB,SAA7C,IAA2D,KAAKf,eAAL,CAAqBT,CAArB,EAAwBC,CAAxB,EAA2BkB,SAA3B,EAAsCjB,UAAtC,CAA/D,EAAkH;AAC9G,aAAKS,OAAL,CAAaX,CAAb,EAAgBC,CAAhB,EAAmBS,IAAnB,EAAyBR,UAAzB,EAAqCU,KAArC;AACH;;AACD,UAAI,CAACZ,CAAC,KAAKgB,EAAE,GAAG,CAAX,IAAgBhB,CAAC,KAAKgB,EAAE,GAAE,CAA3B,KAAkCC,EAAE,KAAKhB,CAAC,GAAGuB,SAA7C,IAA2D,KAAKf,eAAL,CAAqBT,CAArB,EAAwBiB,EAAxB,EAA4BE,SAA5B,EAAuCjB,UAAvC,CAA/D,EAAmH;AAC/G,YAAIN,cAAc,CAACI,CAAD,EAAIiB,EAAJ,EAAQf,UAAR,CAAlB,EAAsC;AAClC,eAAKS,OAAL,CAAaX,CAAb,EAAgBiB,EAAhB,EAAoBP,IAApB,EAA0BR,UAA1B,EAAsCU,KAAtC;AACH;AACJ;AACJ,KA/BkH,CAgCnH;;;AACA,QAAIM,IAAI,KAAKzB,SAAS,CAACgC,KAAvB,EAA6B;AACzB,UAAK,CAACT,EAAE,KAAKhB,CAAC,GAAG,CAAX,IAAgBgB,EAAE,KAAKhB,CAAC,GAAG,CAA5B,MAAoCiB,EAAE,KAAKhB,CAAC,GAAG,CAAX,IAAgBgB,EAAE,KAAKhB,CAAC,GAAG,CAA/D,CAAD,IACC,CAACgB,EAAE,KAAKhB,CAAC,GAAG,CAAX,IAAgBgB,EAAE,KAAKhB,CAAC,GAAG,CAA5B,MAAoCe,EAAE,KAAKhB,CAAC,GAAG,CAAX,IAAgBgB,EAAE,KAAKhB,CAAC,GAAG,CAA/D,CADL,EACwE;AAChE,aAAKW,OAAL,CAAaX,CAAb,EAAgBC,CAAhB,EAAmBS,IAAnB,EAAyBR,UAAzB,EAAqCU,KAArC;AACP;AACJ;;AAED,WAAOA,KAAP;AACH;;AAnEuB","sourcesContent":["import { PieceType, TeamType, Piece } from \"../constants\"\nimport { setEnPassant , checkEnPassant, unsetEnPassant} from \"./epRef\"\n\nexport default class Referee{\n    pawnIsBlockaded(x : number, y: number, boardState : Piece []): boolean {\n        const piece = boardState.find(p => p.x === x && p.y === y) \n        const occupied =  piece ? true : false\n        return occupied\n    }\n    takePiece(x : number, y: number, boardState : Piece []){\n        const piece = boardState.find(p => p.x === x && p.y === y)  \n        if (piece) {\n            piece.taken = true\n        }\n    }\n    isFriendlyPiece(x : number, y: number, team : TeamType, boardState : Piece []): boolean {\n        const piece = boardState.find(p => p.x === x && p.y === y)\n        const occupied =  piece && piece.team === team ? true : false\n        return occupied\n    }\n\n    endMove(x : number, y: number, team : TeamType, boardState : Piece [], valid : boolean){\n        if (!this.isFriendlyPiece(x, y, team, boardState)){\n            this.takePiece(x, y, boardState)\n            unsetEnPassant(boardState)\n            valid = true\n            console.log('validity here' , valid)            \n        }\n    }\n    isValidMove(px : number, py : number, x : number, y : number, type : PieceType, team : TeamType, boardState : Piece []){\n        const enemyTeam = team === TeamType.WHITE ? TeamType.BLACK : TeamType.WHITE\n        const valid = false\n        //PAWN LOGIC \n        //May want to put each piece in different function\n        if (type === PieceType.PAWN){\n            const startingRow = team === TeamType.WHITE ? 1 : 6\n            const increment = team === TeamType.WHITE ? 1 : - 1\n            console.log(px, py, x, y, increment)\n            // Moving Logic\n            if ((py === startingRow && px === x) && (py === y - 2 * increment)){\n                if (!this.pawnIsBlockaded(x, y, boardState) && !this.pawnIsBlockaded(x, y - increment, boardState)){\n                    setEnPassant(px, py, boardState)\n                    return true\n                }\n            } \n            if (py === y - increment && px === x){\n                if (!this.pawnIsBlockaded(x, y, boardState)){\n                    unsetEnPassant(boardState)\n                    return true;\n                }\n            } \n            // ATTACK LOGIC\n            if ((x === px + 1 || x === px -1) && (py === y - increment) && this.isFriendlyPiece(x, y, enemyTeam, boardState)) {\n                this.endMove(x, y, team, boardState, valid)\n            }\n            if ((x === px + 1 || x === px -1) && (py === y - increment) && this.isFriendlyPiece(x, py, enemyTeam, boardState)) {\n                if (checkEnPassant(x, py, boardState)){\n                    this.endMove(x, py, team, boardState, valid)\n                }\n            }\n        }\n        // NIGHT LOGIC \n        if (type === PieceType.NIGHT){\n            if (((px === x + 1 || px === x - 1) &&  (py === y + 2 || py === y - 2)) ||\n                ((py === y + 1 || py === y - 1) &&  (px === x + 2 || px === x - 2))){\n                    this.endMove(x, y, team, boardState, valid)\n            }\n        }\n\n        return valid\n    }\n}"]},"metadata":{},"sourceType":"module"}