{"ast":null,"code":"/*\nThis function updates the Piece [] so that the piece moves to its new location. It\nalso handles the case where a piece is taken and when a ROOK is teleported via \nthe castling move.\n*/\nimport SuperPiece from '../superPiece';\nexport function executeMove(px, py, x, y, possiblePieces, activePlayer, boardState) {\n  const takenPiece = boardState.find(p => p.x === x && p.y === y && p.SuperPiece.team !== activePlayer);\n\n  if (takenPiece) {\n    console.log('I need to make a popup');\n    takePiece(takenPiece, boardState);\n    return takenPiece;\n  }\n\n  const currentPiece = boardState.find(p => p.x === px && p.y === py);\n\n  if (currentPiece) {\n    const id = boardState.indexOf(currentPiece);\n    boardState[id] = {\n      SuperPiece: new SuperPiece(possiblePieces, activePlayer),\n      x,\n      y\n    };\n  }\n\n  return null;\n}\n\nfunction takePiece(p, boardState) {\n  const id = boardState.indexOf(p);\n  boardState.splice(id, 1);\n}","map":{"version":3,"sources":["/home/jaybird/Coding Projects/QuantumChess/quantum-chess/src/Referee/executeMove.ts"],"names":["SuperPiece","executeMove","px","py","x","y","possiblePieces","activePlayer","boardState","takenPiece","find","p","team","console","log","takePiece","currentPiece","id","indexOf","splice"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AAKA,OAAOA,UAAP,MAAuB,eAAvB;AAEA,OAAO,SAASC,WAAT,CAAsBC,EAAtB,EAAmCC,EAAnC,EAAgDC,CAAhD,EAA4DC,CAA5D,EACqBC,cADrB,EACoDC,YADpD,EAC6EC,UAD7E,EACkH;AACrH,QAAMC,UAAU,GAAGD,UAAU,CAACE,IAAX,CAAgBC,CAAC,IAAIA,CAAC,CAACP,CAAF,KAAQA,CAAR,IAAaO,CAAC,CAACN,CAAF,KAAQA,CAArB,IAA0BM,CAAC,CAACX,UAAF,CAAaY,IAAb,KAAsBL,YAArE,CAAnB;;AACA,MAAIE,UAAJ,EAAe;AACXI,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACAC,IAAAA,SAAS,CAACN,UAAD,EAAaD,UAAb,CAAT;AACA,WAAOC,UAAP;AACH;;AACD,QAAMO,YAAY,GAAGR,UAAU,CAACE,IAAX,CAAgBC,CAAC,IAAIA,CAAC,CAACP,CAAF,KAAQF,EAAR,IAAcS,CAAC,CAACN,CAAF,KAAQF,EAA3C,CAArB;;AACA,MAAIa,YAAJ,EAAiB;AACb,UAAMC,EAAE,GAAGT,UAAU,CAACU,OAAX,CAAmBF,YAAnB,CAAX;AACAR,IAAAA,UAAU,CAACS,EAAD,CAAV,GAAiB;AAACjB,MAAAA,UAAU,EAAG,IAAIA,UAAJ,CAAeM,cAAf,EAA+BC,YAA/B,CAAd;AAA4DH,MAAAA,CAA5D;AAA+DC,MAAAA;AAA/D,KAAjB;AACH;;AACD,SAAO,IAAP;AACH;;AAGD,SAASU,SAAT,CAAmBJ,CAAnB,EAA8BH,UAA9B,EAAoD;AAChD,QAAMS,EAAE,GAAGT,UAAU,CAACU,OAAX,CAAmBP,CAAnB,CAAX;AACAH,EAAAA,UAAU,CAACW,MAAX,CAAkBF,EAAlB,EAAsB,CAAtB;AACH","sourcesContent":["/*\nThis function updates the Piece [] so that the piece moves to its new location. It\nalso handles the case where a piece is taken and when a ROOK is teleported via \nthe castling move.\n*/\n\n\n\nimport { Piece, PieceType, TeamType } from '../constants'\nimport SuperPiece from '../superPiece'\n\nexport function executeMove (px : number, py : number, x : number, y: number,\n                            possiblePieces : PieceType [], activePlayer : TeamType, boardState : Piece []): Piece | null {\n    const takenPiece = boardState.find(p => p.x === x && p.y === y && p.SuperPiece.team !== activePlayer)\n    if (takenPiece){\n        console.log('I need to make a popup')\n        takePiece(takenPiece, boardState)\n        return takenPiece\n    }\n    const currentPiece = boardState.find(p => p.x === px && p.y === py) \n    if (currentPiece){\n        const id = boardState.indexOf(currentPiece)\n        boardState[id] = {SuperPiece : new SuperPiece(possiblePieces, activePlayer), x, y}    \n    }\n    return null\n}\n\n\nfunction takePiece(p : Piece, boardState : Piece []){\n    const id = boardState.indexOf(p)\n    boardState.splice(id, 1)\n}\n"]},"metadata":{},"sourceType":"module"}