{"ast":null,"code":"import { PieceType, TeamType } from \"../components/chessboard/chessboard\";\nexport default class Referee {\n  pawnIsBlockaded(x, y, boardState) {\n    const piece = boardState.find(p => p.x === x && p.y === y);\n    const occupied = piece ? true : false;\n    return occupied;\n  }\n\n  isFriendlyPiece(x, y, team, boardState) {\n    const piece = boardState.find(p => p.x === x && p.y === y);\n    const occupied = piece && piece.team === team ? true : false;\n    return occupied;\n  }\n\n  checkEnPassant(x, y, boardState) {\n    const piece = boardState.find(p => p.x === x && p.y === y);\n\n    if (piece) {\n      return piece.enPassantable;\n    }\n\n    return false;\n  }\n\n  setEnPassant(px, py, boardState) {\n    boardState.forEach(p => {\n      if (p.x === px && p.y === py) {\n        p.enPassantable = true;\n      } else {\n        p.enPassantable = false;\n      }\n    });\n  }\n\n  unsetEnPassant(boardState) {\n    boardState.forEach(p => {\n      p.enPassantable = false;\n    });\n  }\n\n  isValidMove(px, py, x, y, type, team, boardState) {\n    const enemyTeam = team === TeamType.WHITE ? TeamType.BLACK : TeamType.WHITE; //PAWN LOGIC \n    //May want to put each piece in different function\n\n    if (type === PieceType.PAWN) {\n      const startingRow = team === TeamType.WHITE ? 1 : 6;\n      const increment = team === TeamType.WHITE ? 1 : -1;\n      console.log(px, py, x, y, increment); // Moving Logic\n\n      if (py === startingRow && px === x && py === y - 2 * increment) {\n        if (!this.pawnIsBlockaded(x, y, boardState) && !this.pawnIsBlockaded(x, y - increment, boardState)) {\n          this.setEnPassant(px, py, boardState);\n          return true;\n        }\n      }\n\n      if (py === y - increment && px === x) {\n        if (!this.pawnIsBlockaded(x, y, boardState)) {\n          this.unsetEnPassant(boardState);\n          return true;\n        }\n      } // ATTACK LOGIC\n\n\n      if ((x === px + 1 || x === px - 1) && py === y - increment && this.isFriendlyPiece(x, y, enemyTeam, boardState)) {\n        console.log(\"shits whack\");\n        this.unsetEnPassant(boardState);\n        return true;\n      }\n\n      if ((x === px + 1 || x === px - 1) && py === y - increment && this.isFriendlyPiece(x, py, enemyTeam, boardState)) {\n        console.log(\"we here fam\");\n\n        if (this.checkEnPassant(x + 1, y, boardState)) {\n          this.unsetEnPassant(boardState);\n          return true;\n        }\n      }\n    } // NIGHT LOGIC \n\n\n    if (type === PieceType.NIGHT) {\n      if ((px === x + 1 || px === x - 1) && (py === y + 2 || py === y - 2) || (py === y + 1 || py === y - 1) && (px === x + 2 || px === x - 2)) {\n        if (!this.isFriendlyPiece(x, y, team, boardState)) {\n          this.unsetEnPassant(boardState);\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n}","map":{"version":3,"sources":["/home/jaybird/Coding Projects/Chess4/chess/src/referee/Referee.ts"],"names":["PieceType","TeamType","Referee","pawnIsBlockaded","x","y","boardState","piece","find","p","occupied","isFriendlyPiece","team","checkEnPassant","enPassantable","setEnPassant","px","py","forEach","unsetEnPassant","isValidMove","type","enemyTeam","WHITE","BLACK","PAWN","startingRow","increment","console","log","NIGHT"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAA2C,qCAA3C;AAEA,eAAe,MAAMC,OAAN,CAAa;AACxBC,EAAAA,eAAe,CAACC,CAAD,EAAaC,CAAb,EAAwBC,UAAxB,EAAwD;AACnE,UAAMC,KAAK,GAAGD,UAAU,CAACE,IAAX,CAAgBC,CAAC,IAAIA,CAAC,CAACL,CAAF,KAAQA,CAAR,IAAaK,CAAC,CAACJ,CAAF,KAAQA,CAA1C,CAAd;AACA,UAAMK,QAAQ,GAAIH,KAAK,GAAG,IAAH,GAAU,KAAjC;AACA,WAAOG,QAAP;AACH;;AAEDC,EAAAA,eAAe,CAACP,CAAD,EAAaC,CAAb,EAAwBO,IAAxB,EAAyCN,UAAzC,EAAyE;AACpF,UAAMC,KAAK,GAAGD,UAAU,CAACE,IAAX,CAAgBC,CAAC,IAAIA,CAAC,CAACL,CAAF,KAAQA,CAAR,IAAaK,CAAC,CAACJ,CAAF,KAAQA,CAA1C,CAAd;AACA,UAAMK,QAAQ,GAAIH,KAAK,IAAIA,KAAK,CAACK,IAAN,KAAeA,IAAxB,GAA+B,IAA/B,GAAsC,KAAxD;AACA,WAAOF,QAAP;AACH;;AACDG,EAAAA,cAAc,CAAET,CAAF,EAAcC,CAAd,EAA0BC,UAA1B,EAA2D;AACrE,UAAMC,KAAK,GAAGD,UAAU,CAACE,IAAX,CAAgBC,CAAC,IAAIA,CAAC,CAACL,CAAF,KAAQA,CAAR,IAAaK,CAAC,CAACJ,CAAF,KAAQA,CAA1C,CAAd;;AACA,QAAIE,KAAJ,EAAU;AACN,aAAOA,KAAK,CAACO,aAAb;AACH;;AAAC,WAAO,KAAP;AAEL;;AACDC,EAAAA,YAAY,CAACC,EAAD,EAAcC,EAAd,EAA2BX,UAA3B,EAAiD;AACzDA,IAAAA,UAAU,CAACY,OAAX,CAAmBT,CAAC,IAAI;AACpB,UAAIA,CAAC,CAACL,CAAF,KAAQY,EAAR,IAAcP,CAAC,CAACJ,CAAF,KAAQY,EAA1B,EAA6B;AACzBR,QAAAA,CAAC,CAACK,aAAF,GAAkB,IAAlB;AACH,OAFD,MAEM;AACFL,QAAAA,CAAC,CAACK,aAAF,GAAkB,KAAlB;AACH;AACJ,KAND;AAOH;;AACDK,EAAAA,cAAc,CAAEb,UAAF,EAAwB;AAClCA,IAAAA,UAAU,CAACY,OAAX,CAAmBT,CAAC,IAAI;AAChBA,MAAAA,CAAC,CAACK,aAAF,GAAkB,KAAlB;AACH,KAFL;AAGH;;AACDM,EAAAA,WAAW,CAACJ,EAAD,EAAcC,EAAd,EAA2Bb,CAA3B,EAAuCC,CAAvC,EAAmDgB,IAAnD,EAAqET,IAArE,EAAsFN,UAAtF,EAA4G;AACnH,UAAMgB,SAAS,GAAGV,IAAI,KAAKX,QAAQ,CAACsB,KAAlB,GAA0BtB,QAAQ,CAACuB,KAAnC,GAA2CvB,QAAQ,CAACsB,KAAtE,CADmH,CAEnH;AACA;;AACA,QAAIF,IAAI,KAAKrB,SAAS,CAACyB,IAAvB,EAA4B;AACxB,YAAMC,WAAW,GAAGd,IAAI,KAAKX,QAAQ,CAACsB,KAAlB,GAA0B,CAA1B,GAA8B,CAAlD;AACA,YAAMI,SAAS,GAAGf,IAAI,KAAKX,QAAQ,CAACsB,KAAlB,GAA0B,CAA1B,GAA8B,CAAE,CAAlD;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAYb,EAAZ,EAAgBC,EAAhB,EAAoBb,CAApB,EAAuBC,CAAvB,EAA0BsB,SAA1B,EAHwB,CAIxB;;AACA,UAAKV,EAAE,KAAKS,WAAP,IAAsBV,EAAE,KAAKZ,CAA9B,IAAqCa,EAAE,KAAKZ,CAAC,GAAG,IAAIsB,SAAxD,EAAmE;AAC/D,YAAI,CAAC,KAAKxB,eAAL,CAAqBC,CAArB,EAAwBC,CAAxB,EAA2BC,UAA3B,CAAD,IAA2C,CAAC,KAAKH,eAAL,CAAqBC,CAArB,EAAwBC,CAAC,GAAGsB,SAA5B,EAAuCrB,UAAvC,CAAhD,EAAmG;AAC/F,eAAKS,YAAL,CAAkBC,EAAlB,EAAsBC,EAAtB,EAA0BX,UAA1B;AACA,iBAAO,IAAP;AACH;AACJ;;AACD,UAAIW,EAAE,KAAKZ,CAAC,GAAGsB,SAAX,IAAwBX,EAAE,KAAKZ,CAAnC,EAAqC;AACjC,YAAI,CAAC,KAAKD,eAAL,CAAqBC,CAArB,EAAwBC,CAAxB,EAA2BC,UAA3B,CAAL,EAA4C;AACxC,eAAKa,cAAL,CAAoBb,UAApB;AACA,iBAAO,IAAP;AACH;AACJ,OAhBuB,CAiBxB;;;AACA,UAAI,CAACF,CAAC,KAAKY,EAAE,GAAG,CAAX,IAAgBZ,CAAC,KAAKY,EAAE,GAAE,CAA3B,KAAkCC,EAAE,KAAKZ,CAAC,GAAGsB,SAA7C,IAA2D,KAAKhB,eAAL,CAAqBP,CAArB,EAAwBC,CAAxB,EAA2BiB,SAA3B,EAAsChB,UAAtC,CAA/D,EAAkH;AAC9GsB,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA,aAAKV,cAAL,CAAoBb,UAApB;AACA,eAAO,IAAP;AACH;;AACD,UAAI,CAACF,CAAC,KAAKY,EAAE,GAAG,CAAX,IAAgBZ,CAAC,KAAKY,EAAE,GAAE,CAA3B,KAAkCC,EAAE,KAAKZ,CAAC,GAAGsB,SAA7C,IAA2D,KAAKhB,eAAL,CAAqBP,CAArB,EAAwBa,EAAxB,EAA4BK,SAA5B,EAAuChB,UAAvC,CAA/D,EAAmH;AAC/GsB,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;;AACA,YAAI,KAAKhB,cAAL,CAAoBT,CAAC,GAAG,CAAxB,EAA2BC,CAA3B,EAA8BC,UAA9B,CAAJ,EAA8C;AAC1C,eAAKa,cAAL,CAAoBb,UAApB;AACA,iBAAO,IAAP;AACH;AACJ;AACJ,KAlCkH,CAmCnH;;;AACA,QAAIe,IAAI,KAAKrB,SAAS,CAAC8B,KAAvB,EAA6B;AACzB,UAAK,CAACd,EAAE,KAAKZ,CAAC,GAAG,CAAX,IAAgBY,EAAE,KAAKZ,CAAC,GAAG,CAA5B,MAAoCa,EAAE,KAAKZ,CAAC,GAAG,CAAX,IAAgBY,EAAE,KAAKZ,CAAC,GAAG,CAA/D,CAAD,IACC,CAACY,EAAE,KAAKZ,CAAC,GAAG,CAAX,IAAgBY,EAAE,KAAKZ,CAAC,GAAG,CAA5B,MAAoCW,EAAE,KAAKZ,CAAC,GAAG,CAAX,IAAgBY,EAAE,KAAKZ,CAAC,GAAG,CAA/D,CADL,EACwE;AAChE,YAAI,CAAC,KAAKO,eAAL,CAAqBP,CAArB,EAAwBC,CAAxB,EAA2BO,IAA3B,EAAiCN,UAAjC,CAAL,EAAkD;AAC9C,eAAKa,cAAL,CAAoBb,UAApB;AACA,iBAAO,IAAP;AACH;AACR;AACJ;;AAED,WAAO,KAAP;AACH;;AAhFuB","sourcesContent":["import { PieceType, TeamType, Piece } from \"../components/chessboard/chessboard\"\n\nexport default class Referee{\n    pawnIsBlockaded(x : number, y: number, boardState : Piece []): boolean {\n        const piece = boardState.find(p => p.x === x && p.y === y) \n        const occupied =  piece ? true : false\n        return occupied\n    }\n    \n    isFriendlyPiece(x : number, y: number, team : TeamType, boardState : Piece []): boolean {\n        const piece = boardState.find(p => p.x === x && p.y === y)\n        const occupied =  piece && piece.team === team ? true : false\n        return occupied\n    }\n    checkEnPassant (x : number, y : number, boardState : Piece []) : boolean {\n        const piece = boardState.find(p => p.x === x && p.y === y)\n        if (piece){\n            return piece.enPassantable  \n        } return false\n\n    }\n    setEnPassant(px : number, py : number, boardState : Piece []){\n        boardState.forEach(p => {\n            if (p.x === px && p.y === py){\n                p.enPassantable = true\n            } else{\n                p.enPassantable = false\n            }\n        })\n    }\n    unsetEnPassant( boardState : Piece []){\n        boardState.forEach(p => {\n                p.enPassantable = false\n            })\n    }\n    isValidMove(px : number, py : number, x : number, y : number, type : PieceType, team : TeamType, boardState : Piece []){\n        const enemyTeam = team === TeamType.WHITE ? TeamType.BLACK : TeamType.WHITE\n        //PAWN LOGIC \n        //May want to put each piece in different function\n        if (type === PieceType.PAWN){\n            const startingRow = team === TeamType.WHITE ? 1 : 6\n            const increment = team === TeamType.WHITE ? 1 : - 1\n            console.log(px, py, x, y, increment)\n            // Moving Logic\n            if ((py === startingRow && px === x) && (py === y - 2 * increment)){\n                if (!this.pawnIsBlockaded(x, y, boardState) && !this.pawnIsBlockaded(x, y - increment, boardState)){\n                    this.setEnPassant(px, py, boardState)\n                    return true\n                }\n            } \n            if (py === y - increment && px === x){\n                if (!this.pawnIsBlockaded(x, y, boardState)){\n                    this.unsetEnPassant(boardState)\n                    return true;\n                }\n            } \n            // ATTACK LOGIC\n            if ((x === px + 1 || x === px -1) && (py === y - increment) && this.isFriendlyPiece(x, y, enemyTeam, boardState)) {\n                console.log(\"shits whack\")\n                this.unsetEnPassant(boardState)\n                return true\n            }\n            if ((x === px + 1 || x === px -1) && (py === y - increment) && this.isFriendlyPiece(x, py, enemyTeam, boardState)) {\n                console.log(\"we here fam\")\n                if (this.checkEnPassant(x + 1, y, boardState)){\n                    this.unsetEnPassant(boardState)\n                    return true\n                }\n            }\n        }\n        // NIGHT LOGIC \n        if (type === PieceType.NIGHT){\n            if (((px === x + 1 || px === x - 1) &&  (py === y + 2 || py === y - 2)) ||\n                ((py === y + 1 || py === y - 1) &&  (px === x + 2 || px === x - 2))){\n                    if (!this.isFriendlyPiece(x, y, team, boardState)){\n                        this.unsetEnPassant(boardState)\n                        return true\n                    }\n            }\n        }\n\n        return false\n    }\n}"]},"metadata":{},"sourceType":"module"}