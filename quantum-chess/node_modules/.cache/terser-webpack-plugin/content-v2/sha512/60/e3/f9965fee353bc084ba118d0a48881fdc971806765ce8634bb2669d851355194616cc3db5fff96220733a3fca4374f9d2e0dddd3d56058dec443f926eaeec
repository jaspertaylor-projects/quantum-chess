{"code":"(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],[,,,,,,,,,,,function(e,n,t){},function(e,n,t){},function(e,n,t){},,function(e,n,t){},function(e,n,t){\"use strict\";t.r(n);var a=t(1),i=t.n(a),r=t(6),s=t.n(r),c=(t(11),t(12),t(2)),u=(t(13),t(0));function o(e){var n=e.number,t=e.image;return n%2===0?Object(u.jsx)(\"div\",{className:\"tile black-tile\",children:t&&Object(u.jsx)(\"div\",{style:{backgroundImage:\"url(\".concat(t,\")\")},className:\"chess-piece\"})}):Object(u.jsx)(\"div\",{className:\"tile white-tile\",children:t&&Object(u.jsx)(\"div\",{style:{backgroundImage:\"url(\".concat(t,\")\")},className:\"chess-piece\"})})}t(15);var f,l,v=t(3),y=t(4),h=[\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\"],b=[1,2,3,4,5,6,7,8],d=100;!function(e){e[e.WHITE=0]=\"WHITE\",e[e.BLACK=1]=\"BLACK\"}(f||(f={})),function(e){e[e.PAWN=0]=\"PAWN\",e[e.BISHOP=1]=\"BISHOP\",e[e.NIGHT=2]=\"NIGHT\",e[e.ROOK=3]=\"ROOK\",e[e.QUEEN=4]=\"QUEEN\",e[e.KING=5]=\"KING\"}(l||(l={}));for(var p=[],g=0;g<2;g++){var x=0===g?\"b\":\"w\",m=0===g?f.BLACK:f.WHITE,I=0===g?7:0;p.push({image:\"assets/images/rook_\".concat(x,\".png\"),x:0,y:I,team:m,type:l.ROOK,enPassantable:!1,canCastle:!0}),p.push({image:\"assets/images/rook_\".concat(x,\".png\"),x:7,y:I,team:m,type:l.ROOK,enPassantable:!1,canCastle:!0}),p.push({image:\"assets/images/night_\".concat(x,\".png\"),x:1,y:I,team:m,type:l.NIGHT,enPassantable:!1}),p.push({image:\"assets/images/night_\".concat(x,\".png\"),x:6,y:I,team:m,type:l.NIGHT,enPassantable:!1}),p.push({image:\"assets/images/bishop_\".concat(x,\".png\"),x:2,y:I,team:m,type:l.BISHOP,enPassantable:!1}),p.push({image:\"assets/images/bishop_\".concat(x,\".png\"),x:5,y:I,team:m,type:l.BISHOP,enPassantable:!1}),p.push({image:\"assets/images/queen_\".concat(x,\".png\"),x:3,y:I,team:m,type:l.QUEEN,enPassantable:!1}),p.push({image:\"assets/images/king_\".concat(x,\".png\"),x:4,y:I,team:m,type:l.KING,enPassantable:!1,canCastle:!0})}for(var M=0;M<h.length;M++)p.push({image:\"assets/images/pawn_b.png\",x:M,y:6,team:f.BLACK,type:l.PAWN,enPassantable:!1});for(var O=0;O<h.length;O++)p.push({image:\"assets/images/pawn_w.png\",x:O,y:1,team:f.WHITE,type:l.PAWN,enPassantable:!1});function j(e,n,t){return!!t.find((function(t){return t.x===e&&t.y===n}))}function k(e,n,t,a){var i=a.find((function(t){return t.x===e&&t.y===n}));return!(!i||i.team!==t)}function C(e,n,t,a,i,r){var s=i===f.WHITE?f.BLACK:f.WHITE,c=i===f.WHITE?1:-1;return n===a-c&&e===t&&!j(t,a,r)||!(t!==e+1&&t!==e-1||n!==a-c||!k(t,a,s,r))}var K=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,[{key:\"isMyKingInCheck\",value:function(e,n,t){for(var a=e===f.WHITE?f.BLACK:f.WHITE,i=n.find((function(n){return n.team===e&&n.type===l.KING})),r=0;r<n.length;r++){var s=n[r];if(i&&s.team===a){var c=i.x+t-s.x,u=i.y-s.y;switch(s.type){case l.PAWN:if(C(s.x,s.y,i.x+t,i.y,s.team,n))return!0;break;case l.NIGHT:if(H(s.x,s.y,c,u,n))return!0;break;case l.BISHOP:if(E(s.x,s.y,c,u,n))return!0;break;case l.ROOK:if(P(s.x,s.y,c,u,n))return!0;break;case l.QUEEN:if(T(s.x,s.y,c,u,n))return!0;break;case l.KING:if(N(s.x,s.y,c,u,n))return!0}}}return!1}}]),e}();function P(e,n,t,a,i){if(0===t||0===a){if(0===t){var r=function(){for(var t=Math.sign(a),r=function(a){if(i.find((function(i){return i.x===e&&i.y===n+a*t})))return{v:{v:!1}}},s=1;s<Math.abs(a);s++){var c=r(s);if(\"object\"===typeof c)return c.v}return{v:!0}}();if(\"object\"===typeof r)return r.v}if(0===a){var s=function(){for(var a=Math.sign(t),r=function(t){if(i.find((function(i){return i.x===e+t*a&&i.y===n})))return{v:{v:!1}}},s=1;s<Math.abs(t);s++){var c=r(s);if(\"object\"===typeof c)return c.v}return{v:!0}}();if(\"object\"===typeof s)return s.v}}return!1}function E(e,n,t,a,i){if(Math.abs(t)===Math.abs(a)){var r=function(){for(var r=Math.sign(t),s=Math.sign(a),c=function(t){if(i.find((function(a){return a.x===e+t*r&&a.y===n+t*s})))return{v:{v:!1}}},u=1;u<Math.abs(t);u++){var o=c(u);if(\"object\"===typeof o)return o.v}return{v:!0}}();if(\"object\"===typeof r)return r.v}return!1}function H(e,n,t,a,i){return 1===Math.abs(t)&&2===Math.abs(a)||2===Math.abs(t)&&1===Math.abs(a)}function T(e,n,t,a,i){return P(e,n,t,a,i)||E(e,n,t,a,i)}function N(e,n,t,a,i){return Math.abs(t)<2&&Math.abs(a)<2}var W=function(){function e(){Object(v.a)(this,e)}return Object(y.a)(e,[{key:\"noCastle\",value:function(e,n,t){var a=t.find((function(t){return t.x===e&&t.y===n}));a&&(a.canCastle=!1)}},{key:\"takePiece\",value:function(e,n,t,a){var i=a.find((function(a){return a.x===e&&a.y===n&&a.team!==t}));i&&(i.taken=!0)}},{key:\"endMove\",value:function(e,n,t,a,i,r,s){k(t,a,i,r)||(this.noCastle(e,n,r),this.takePiece(t,a,i,r),function(e){e.forEach((function(e){e.enPassantable=!1}))}(r),s.value=!0)}},{key:\"isValidMove\",value:function(e,n,t,a,i,r,s,c){if(r!==c)return!1;if(e===t&&n===a)return!1;if(t<0||a<0||t>7||a>7)return!1;var u={value:!1},o=t-e,v=a-n;switch(i){case l.PAWN:if(function(e,n,t,a,i,r){var s=i===f.WHITE?1:6,c=i===f.WHITE?1:-1;return n===s&&e===t&&n===a-2*c&&!j(t,a,r)&&!j(t,a-c,r)}(e,n,t,a,r,s))return function(e,n,t){t.forEach((function(t){t.x===e&&t.y===n?t.enPassantable=!0:t.enPassantable=!1}))}(e,n,s),!0;C(e,n,t,a,r,s)&&this.endMove(e,n,t,a,r,s,u),function(e,n,t,a,i,r){var s=i===f.WHITE?f.BLACK:f.WHITE,c=i===f.WHITE?1:-1;return!(t!==e+1&&t!==e-1||n!==a-c||!k(t,n,s,r)||!function(e,n,t){var a=t.find((function(t){return t.x===e&&t.y===n}));return!(!a||!a.enPassantable)&&a.enPassantable}(t,n,r))}(e,n,t,a,r,s)&&this.endMove(-1,-1,t,n,r,s,u);break;case l.NIGHT:H(0,0,o,v)&&this.endMove(e,n,t,a,r,s,u);break;case l.BISHOP:E(e,n,o,v,s)&&this.endMove(e,n,t,a,r,s,u);break;case l.ROOK:P(e,n,o,v,s)&&this.endMove(e,n,t,a,r,s,u);break;case l.QUEEN:T(e,n,o,v,s)&&this.endMove(e,n,t,a,r,s,u);break;case l.KING:if(N(0,0,o,v)&&this.endMove(e,n,t,a,r,s,u),function(e,n,t,a,i,r){var s=new K,c=r.find((function(e){return e.type===l.KING&&e.team===i}));if(i===f.WHITE){if(!0===(null===c||void 0===c?void 0:c.canCastle)&&-2===t){var u=r.find((function(e){return 0===e.x&&0===e.y}));if((null===u||void 0===u?void 0:u.canCastle)&&!s.isMyKingInCheck(i,r,0)&&!s.isMyKingInCheck(i,r,-1)&&!s.isMyKingInCheck(i,r,-2)&&P(c.x,c.y,-4,0,r))return!0}if(!0===(null===c||void 0===c?void 0:c.canCastle)&&2===t){var o=r.find((function(e){return 7===e.x&&0===e.y}));if((null===o||void 0===o?void 0:o.canCastle)&&!s.isMyKingInCheck(i,r,0)&&!s.isMyKingInCheck(i,r,1)&&!s.isMyKingInCheck(i,r,2)&&P(c.x,c.y,3,0,r))return!0}}if(i===f.BLACK){if(!0===(null===c||void 0===c?void 0:c.canCastle)&&-2===t){var v=r.find((function(e){return 0===e.x&&7===e.y}));if((null===v||void 0===v?void 0:v.canCastle)&&!s.isMyKingInCheck(i,r,0)&&!s.isMyKingInCheck(i,r,-1)&&!s.isMyKingInCheck(i,r,-2)&&P(c.x,c.y,-4,0,r))return!0}if(!0===(null===c||void 0===c?void 0:c.canCastle)&&2===t){var y=r.find((function(e){return 7===e.x&&7===e.y}));if((null===y||void 0===y?void 0:y.canCastle)&&!s.isMyKingInCheck(i,r,0)&&!s.isMyKingInCheck(i,r,1)&&!s.isMyKingInCheck(i,r,2))return P(c.x,c.y,3,0,r),!0}}return!1}(0,0,o,0,c,s)){if(c===f.WHITE){if(-2===o){var y=s.find((function(e){return 0===e.x&&0===e.y}));y&&(y.teleported=!0)}if(2===o){var h=s.find((function(e){return 7===e.x&&0===e.y}));h&&(h.teleported=!0)}}if(c===f.BLACK){if(-2===o){var b=s.find((function(e){return 0===e.x&&7===e.y}));b&&(b.teleported=!0)}if(2===o){var d=s.find((function(e){return 7===e.x&&7===e.y}));d&&(d.teleported=!0)}}this.endMove(e,n,t,a,r,s,u)}}return u.value}}]),e}();function B(){var e=Object(a.useState)(null),n=Object(c.a)(e,2),t=n[0],i=n[1],r=Object(a.useState)(0),s=Object(c.a)(r,2),l=s[0],v=s[1],y=Object(a.useState)(0),g=Object(c.a)(y,2),x=g[0],m=g[1],I=Object(a.useState)(p),M=Object(c.a)(I,2),O=M[0],j=M[1],k=Object(a.useState)(f.WHITE),C=Object(c.a)(k,2),P=C[0],E=C[1],H=Object(a.useRef)(null),T=new W,N=new K;function B(){t&&(t.style.position=\"relative\",t.style.removeProperty(\"left\"),t.style.removeProperty(\"top\"))}function A(e){var n=H.current;if(t&&n){var a=Math.floor((e.clientX-n.offsetLeft)/d),r=Math.abs(Math.ceil((e.clientY-n.offsetTop-800)/d)),s=O.find((function(e){return e.x===l&&e.y===x}));if(s){var c=function(){var e=[];return O.forEach((function(n){return e.push({image:n.image,x:n.x,y:n.y,team:n.team,type:n.type,enPassantable:n.enPassantable})})),e}();if(T.isValidMove(l,x,a,r,s.type,s.team,O,P)){var u=O.find((function(e){return!0===e.taken}));u&&function(e){var n=O.indexOf(e);O.splice(n,1)}(u);var o=O.find((function(e){return!0===e.teleported}));o&&function(e){var n=0;n=7===e.x?-2:3,e.x=e.x+n,e.teleported=!1}(o);var v=O.indexOf(s);s.x=a,s.y=r,O[v]=s,N.isMyKingInCheck(s.team,O,0)?(j(c),B()):(j(O),function(){var e=P===f.WHITE?f.BLACK:f.WHITE;E(e)}())}else B()}}i(null)}for(var L=[],w=function(e){for(var n=function(n){var t=n+e,a=O.find((function(t){return t.x===n&&t.y===e})),i=a?a.image:void 0;L.push(Object(u.jsx)(o,{image:i,number:t},\"\".concat(n,\", \").concat(e)))},t=0;t<h.length;t++)n(t)},G=b.length-1;G>=0;G--)w(G);return Object(u.jsx)(\"div\",{ref:H,onMouseUp:function(e){return A(e)},onMouseMove:function(e){return function(e){var n=H.current;if(t&&n){var a=e.clientX-50,i=e.clientY-50;t.style.position=\"absolute\",t.style.left=\"\".concat(a,\"px\"),t.style.top=\"\".concat(i,\"px\")}}(e)},onMouseDown:function(e){return function(e){var n=H.current,t=e.target;if(t.classList.contains(\"chess-piece\")&&n){v(Math.floor((e.clientX-n.offsetLeft)/d)),m(Math.abs(Math.ceil((e.clientY-n.offsetTop-800)/d)));var a=e.clientX-50,r=e.clientY- -50;t.style.position=\"absolute\",t.style.left=\"\".concat(a,\"px\"),t.style.top=\"\".concat(r,\"px\"),i(t)}}(e)},id:\"chessboard\",children:L})}var A=function(){return Object(u.jsx)(\"div\",{id:\"App\",children:Object(u.jsx)(B,{})})},L=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,17)).then((function(n){var t=n.getCLS,a=n.getFID,i=n.getFCP,r=n.getLCP,s=n.getTTFB;t(e),a(e),i(e),r(e),s(e)}))};s.a.render(Object(u.jsx)(i.a.StrictMode,{children:Object(u.jsx)(A,{})}),document.getElementById(\"root\")),L()}],[[16,1,2]]]);","name":"static/js/main.5e851d0f.chunk.js","map":{"version":3,"sources":["static/js/main.5e851d0f.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","slicedToArray","jsx_runtime","Tile","_ref","number","image","Object","className","children","style","backgroundImage","concat","TeamType","PieceType","classCallCheck","createClass","HORIZONTAL_AXIS","VERTICAL_AXIS","GRID_SIZE","initialBoardState","constants_p","constants_type","constants_team","BLACK","WHITE","constants_y","x","y","team","type","ROOK","enPassantable","canCastle","NIGHT","BISHOP","QUEEN","KING","constants_i","length","PAWN","_i","pawnIsBlockaded","boardState","find","p","isFriendlyPiece","piece","isPawnNormalMove","px","py","enemyTeam","increment","boardChecks_Checker","Checker","key","value","myKing","i","dx","dy","isLegalNightMove","isLegalBishopMove","isLegalRookMove","isLegalQueenMove","isLegalKingMove","_ret","y_dir","Math","sign","_loop","v","abs","_ret2","_ret3","x_dir","_loop2","_ret4","_ret5","_loop3","_ret6","Referee_Referee","Referee","taken","valid","noCastle","takePiece","forEach","unsetEnPassant","activePlayer","startingRow","isPawnStartingMove","setEnPassant","endMove","checkEnPassant","isEnPassant","checker","king","rook","isMyKingInCheck","_rook","_rook2","_rook3","isCastleMove","teleported","_piece","_piece2","_piece3","Chessboard","_useState","_useState2","activePiece","setActivePiece","_useState3","_useState4","gridX","setGridX","_useState5","_useState6","gridY","setGridY","_useState7","_useState8","pieces","setPieces","_useState9","_useState10","setActivePlayer","chessboardRef","referee","revert","position","removeProperty","dropPiece","e","chessboard","current","floor","clientX","offsetLeft","ceil","clientY","offsetTop","currentPiece","oldBoardState","deepCopy","isValidMove","takenPiece","id2","indexOf","splice","teleportedPiece","tele","teleportPiece","id1","nextPlayer","switchPlayer","board","j","undefined","ref","onMouseUp","onMouseMove","left","top","movePiece","onMouseDown","element","target","classList","contains","grabPiece","id","src_App","src_reportWebVitals","onPerfEntry","Function","then","bind","getCLS","getFID","getFCP","getLCP","getTTFB","a","render","StrictMode","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpchess\"] = this[\"webpackJsonpchess\"] || []).push([[0],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n/* 14 */,\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n/* 16 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(6);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./src/App.css\nvar App = __webpack_require__(12);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./src/components/Tile/tile.css\nvar tile = __webpack_require__(13);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/components/Tile/Tile.tsx\nfunction Tile(_ref){var number=_ref.number,image=_ref.image;if(number%2===0){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"tile black-tile\",children:image&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{backgroundImage:\"url(\".concat(image,\")\")},className:\"chess-piece\"})});}else{return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"tile white-tile\",children:image&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{backgroundImage:\"url(\".concat(image,\")\")},className:\"chess-piece\"})});}}\n// EXTERNAL MODULE: ./src/components/chessboard/chessboard.css\nvar chessboard_chessboard = __webpack_require__(15);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\nvar classCallCheck = __webpack_require__(3);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\nvar createClass = __webpack_require__(4);\n\n// CONCATENATED MODULE: ./src/constants.ts\nvar HORIZONTAL_AXIS=['a','b','c','d','e','f','g','h'];var VERTICAL_AXIS=[1,2,3,4,5,6,7,8];var GRID_SIZE=100;var TeamType;(function(TeamType){TeamType[TeamType[\"WHITE\"]=0]=\"WHITE\";TeamType[TeamType[\"BLACK\"]=1]=\"BLACK\";})(TeamType||(TeamType={}));var PieceType;(function(PieceType){PieceType[PieceType[\"PAWN\"]=0]=\"PAWN\";PieceType[PieceType[\"BISHOP\"]=1]=\"BISHOP\";PieceType[PieceType[\"NIGHT\"]=2]=\"NIGHT\";PieceType[PieceType[\"ROOK\"]=3]=\"ROOK\";PieceType[PieceType[\"QUEEN\"]=4]=\"QUEEN\";PieceType[PieceType[\"KING\"]=5]=\"KING\";})(PieceType||(PieceType={}));var initialBoardState=[];for(var constants_p=0;constants_p<2;constants_p++){var constants_type=constants_p===0?'b':'w';var constants_team=constants_p===0?TeamType.BLACK:TeamType.WHITE;var constants_y=constants_p===0?7:0;// Rooks\ninitialBoardState.push({image:\"assets/images/rook_\".concat(constants_type,\".png\"),x:0,y:constants_y,team:constants_team,type:PieceType.ROOK,enPassantable:false,canCastle:true});initialBoardState.push({image:\"assets/images/rook_\".concat(constants_type,\".png\"),x:7,y:constants_y,team:constants_team,type:PieceType.ROOK,enPassantable:false,canCastle:true});// Nights\ninitialBoardState.push({image:\"assets/images/night_\".concat(constants_type,\".png\"),x:1,y:constants_y,team:constants_team,type:PieceType.NIGHT,enPassantable:false});initialBoardState.push({image:\"assets/images/night_\".concat(constants_type,\".png\"),x:6,y:constants_y,team:constants_team,type:PieceType.NIGHT,enPassantable:false});// Bishops\ninitialBoardState.push({image:\"assets/images/bishop_\".concat(constants_type,\".png\"),x:2,y:constants_y,team:constants_team,type:PieceType.BISHOP,enPassantable:false});initialBoardState.push({image:\"assets/images/bishop_\".concat(constants_type,\".png\"),x:5,y:constants_y,team:constants_team,type:PieceType.BISHOP,enPassantable:false});// Queens\ninitialBoardState.push({image:\"assets/images/queen_\".concat(constants_type,\".png\"),x:3,y:constants_y,team:constants_team,type:PieceType.QUEEN,enPassantable:false});// Kings\ninitialBoardState.push({image:\"assets/images/king_\".concat(constants_type,\".png\"),x:4,y:constants_y,team:constants_team,type:PieceType.KING,enPassantable:false,canCastle:true});}// Pawns\nfor(var constants_i=0;constants_i<HORIZONTAL_AXIS.length;constants_i++){initialBoardState.push({image:'assets/images/pawn_b.png',x:constants_i,y:6,team:TeamType.BLACK,type:PieceType.PAWN,enPassantable:false});}for(var _i=0;_i<HORIZONTAL_AXIS.length;_i++){initialBoardState.push({image:'assets/images/pawn_w.png',x:_i,y:1,team:TeamType.WHITE,type:PieceType.PAWN,enPassantable:false});}\n// CONCATENATED MODULE: ./src/referee/pawnLogic.ts\nfunction pawnIsBlockaded(x,y,boardState){var piece=boardState.find(function(p){return p.x===x&&p.y===y;});var occupied=piece?true:false;return occupied;}function checkEnPassant(x,y,boardState){var piece=boardState.find(function(p){return p.x===x&&p.y===y;});if(piece&&piece.enPassantable){return piece.enPassantable;}return false;}function setEnPassant(px,py,boardState){boardState.forEach(function(p){if(p.x===px&&p.y===py){p.enPassantable=true;}else{p.enPassantable=false;}});}function unsetEnPassant(boardState){boardState.forEach(function(p){p.enPassantable=false;});}function isFriendlyPiece(x,y,team,boardState){var piece=boardState.find(function(p){return p.x===x&&p.y===y;});var occupied=piece&&piece.team===team?true:false;return occupied;}function isPawnStartingMove(px,py,x,y,team,boardState){var startingRow=team===TeamType.WHITE?1:6;var increment=team===TeamType.WHITE?1:-1;if(py===startingRow&&px===x&&py===y-2*increment){if(!pawnIsBlockaded(x,y,boardState)&&!pawnIsBlockaded(x,y-increment,boardState)){return true;}}return false;}function isPawnNormalMove(px,py,x,y,team,boardState){var enemyTeam=team===TeamType.WHITE?TeamType.BLACK:TeamType.WHITE;var increment=team===TeamType.WHITE?1:-1;if(py===y-increment&&px===x){if(!pawnIsBlockaded(x,y,boardState)){return true;}}if((x===px+1||x===px-1)&&py===y-increment&&isFriendlyPiece(x,y,enemyTeam,boardState)){return true;}return false;}function isEnPassant(px,py,x,y,team,boardState){var enemyTeam=team===TeamType.WHITE?TeamType.BLACK:TeamType.WHITE;var increment=team===TeamType.WHITE?1:-1;if((x===px+1||x===px-1)&&py===y-increment&&isFriendlyPiece(x,py,enemyTeam,boardState)){if(checkEnPassant(x,py,boardState)){return true;}}return false;}\n// CONCATENATED MODULE: ./src/referee/boardChecks.ts\nvar boardChecks_Checker=/*#__PURE__*/function(){function Checker(){Object(classCallCheck[\"a\" /* default */])(this,Checker);}Object(createClass[\"a\" /* default */])(Checker,[{key:\"isMyKingInCheck\",value:function isMyKingInCheck(team,boardState,increment){var enemyTeam=team===TeamType.WHITE?TeamType.BLACK:TeamType.WHITE;var myKing=boardState.find(function(p){return p.team===team&&p.type===PieceType.KING;});for(var i=0;i<boardState.length;i++){var p=boardState[i];if(myKing&&p.team===enemyTeam){var dx=myKing.x+increment-p.x;var dy=myKing.y-p.y;switch(p.type){case PieceType.PAWN:{if(isPawnNormalMove(p.x,p.y,myKing.x+increment,myKing.y,p.team,boardState)){return true;}break;}case PieceType.NIGHT:{if(isLegalNightMove(p.x,p.y,dx,dy,boardState)){return true;}break;}case PieceType.BISHOP:{if(isLegalBishopMove(p.x,p.y,dx,dy,boardState)){return true;}break;}case PieceType.ROOK:{if(isLegalRookMove(p.x,p.y,dx,dy,boardState)){return true;}break;}case PieceType.QUEEN:{if(isLegalQueenMove(p.x,p.y,dx,dy,boardState)){return true;}break;}case PieceType.KING:{if(isLegalKingMove(p.x,p.y,dx,dy,boardState)){return true;}break;}}}}return false;}}]);return Checker;}();\n// CONCATENATED MODULE: ./src/referee/pieceLogic.ts\nfunction isLegalRookMove(px,py,dx,dy,boardState){if(dx===0||dy===0){if(dx===0){var _ret=function(){var y_dir=Math.sign(dy);var _loop=function _loop(i){var obstructingPiece=boardState.find(function(p){return p.x===px&&p.y===py+i*y_dir;});if(obstructingPiece){return{v:{v:false}};}};for(var i=1;i<Math.abs(dy);i++){var _ret2=_loop(i);if(typeof _ret2===\"object\")return _ret2.v;}return{v:true};}();if(typeof _ret===\"object\")return _ret.v;}if(dy===0){var _ret3=function(){var x_dir=Math.sign(dx);var _loop2=function _loop2(i){var obstructingPiece=boardState.find(function(p){return p.x===px+i*x_dir&&p.y===py;});if(obstructingPiece){return{v:{v:false}};}};for(var i=1;i<Math.abs(dx);i++){var _ret4=_loop2(i);if(typeof _ret4===\"object\")return _ret4.v;}return{v:true};}();if(typeof _ret3===\"object\")return _ret3.v;}}return false;}function isLegalBishopMove(px,py,dx,dy,boardState){if(Math.abs(dx)===Math.abs(dy)){var _ret5=function(){var x_dir=Math.sign(dx);var y_dir=Math.sign(dy);var _loop3=function _loop3(i){var obstructingPiece=boardState.find(function(p){return p.x===px+i*x_dir&&p.y===py+i*y_dir;});if(obstructingPiece){return{v:{v:false}};}};for(var i=1;i<Math.abs(dx);i++){var _ret6=_loop3(i);if(typeof _ret6===\"object\")return _ret6.v;}return{v:true};}();if(typeof _ret5===\"object\")return _ret5.v;}return false;}function isLegalNightMove(px,py,dx,dy,boardState){if(Math.abs(dx)===1&&Math.abs(dy)===2||Math.abs(dx)===2&&Math.abs(dy)===1){return true;}return false;}function isLegalQueenMove(px,py,dx,dy,boardState){var legality=isLegalRookMove(px,py,dx,dy,boardState)||isLegalBishopMove(px,py,dx,dy,boardState);return legality;}function isLegalKingMove(px,py,dx,dy,boardState){if(Math.abs(dx)<2&&Math.abs(dy)<2){return true;}return false;}function isCastleMove(px,py,dx,dy,team,boardState){var checker=new boardChecks_Checker();var king=boardState.find(function(p){return p.type===PieceType.KING&&p.team===team;});if(team===TeamType.WHITE){if((king===null||king===void 0?void 0:king.canCastle)===true&&dx===-2){var rook=boardState.find(function(p){return p.x===0&&p.y===0;});if(rook===null||rook===void 0?void 0:rook.canCastle){if(!checker.isMyKingInCheck(team,boardState,0)&&!checker.isMyKingInCheck(team,boardState,-1)&&!checker.isMyKingInCheck(team,boardState,-2)){if(isLegalRookMove(king.x,king.y,-4,0,boardState)){return true;}}}}if((king===null||king===void 0?void 0:king.canCastle)===true&&dx===2){var _rook=boardState.find(function(p){return p.x===7&&p.y===0;});if(_rook===null||_rook===void 0?void 0:_rook.canCastle){if(!checker.isMyKingInCheck(team,boardState,0)&&!checker.isMyKingInCheck(team,boardState,1)&&!checker.isMyKingInCheck(team,boardState,2)){if(isLegalRookMove(king.x,king.y,3,0,boardState)){return true;}}}}}if(team===TeamType.BLACK){if((king===null||king===void 0?void 0:king.canCastle)===true&&dx===-2){var _rook2=boardState.find(function(p){return p.x===0&&p.y===7;});if(_rook2===null||_rook2===void 0?void 0:_rook2.canCastle){if(!checker.isMyKingInCheck(team,boardState,0)&&!checker.isMyKingInCheck(team,boardState,-1)&&!checker.isMyKingInCheck(team,boardState,-2)){if(isLegalRookMove(king.x,king.y,-4,0,boardState)){return true;}}}}if((king===null||king===void 0?void 0:king.canCastle)===true&&dx===2){var _rook3=boardState.find(function(p){return p.x===7&&p.y===7;});if(_rook3===null||_rook3===void 0?void 0:_rook3.canCastle){if(!checker.isMyKingInCheck(team,boardState,0)&&!checker.isMyKingInCheck(team,boardState,1)&&!checker.isMyKingInCheck(team,boardState,2)){if(isLegalRookMove(king.x,king.y,3,0,boardState)){return true;}return true;}}}}return false;}\n// CONCATENATED MODULE: ./src/referee/Referee.ts\nvar Referee_Referee=/*#__PURE__*/function(){function Referee(){Object(classCallCheck[\"a\" /* default */])(this,Referee);}Object(createClass[\"a\" /* default */])(Referee,[{key:\"noCastle\",value:function noCastle(px,py,boardState){var piece=boardState.find(function(p){return p.x===px&&p.y===py;});if(piece){piece.canCastle=false;}}},{key:\"takePiece\",value:function takePiece(x,y,team,boardState){var piece=boardState.find(function(p){return p.x===x&&p.y===y&&p.team!==team;});if(piece){piece.taken=true;}}},{key:\"endMove\",value:function endMove(px,py,x,y,team,boardState,valid){if(!isFriendlyPiece(x,y,team,boardState)){this.noCastle(px,py,boardState);this.takePiece(x,y,team,boardState);unsetEnPassant(boardState);valid.value=true;}}},{key:\"isValidMove\",value:function isValidMove(px,py,x,y,type,team,boardState,activePlayer){// Only the active player can move\nif(team!==activePlayer){return false;}// A non-move is not a move\nif(px===x&&py===y){return false;}// A move off the board is not a move\nif(x<0||y<0||x>7||y>7){return false;}var valid={value:false};var dx=x-px;var dy=y-py;switch(type){case PieceType.PAWN:{if(isPawnStartingMove(px,py,x,y,team,boardState)){setEnPassant(px,py,boardState);return true;}if(isPawnNormalMove(px,py,x,y,team,boardState)){this.endMove(px,py,x,y,team,boardState,valid);}if(isEnPassant(px,py,x,y,team,boardState)){this.endMove(-1,-1,x,py,team,boardState,valid);}break;}case PieceType.NIGHT:{if(isLegalNightMove(px,py,dx,dy,boardState)){this.endMove(px,py,x,y,team,boardState,valid);}break;}case PieceType.BISHOP:{if(isLegalBishopMove(px,py,dx,dy,boardState)){this.endMove(px,py,x,y,team,boardState,valid);}break;}case PieceType.ROOK:{if(isLegalRookMove(px,py,dx,dy,boardState)){this.endMove(px,py,x,y,team,boardState,valid);}break;}case PieceType.QUEEN:{if(isLegalQueenMove(px,py,dx,dy,boardState)){this.endMove(px,py,x,y,team,boardState,valid);}break;}case PieceType.KING:{if(isLegalKingMove(px,py,dx,dy,boardState)){this.endMove(px,py,x,y,team,boardState,valid);}if(isCastleMove(px,py,dx,dy,activePlayer,boardState)){if(activePlayer===TeamType.WHITE){if(dx===-2){var piece=boardState.find(function(p){return p.x===0&&p.y===0;});if(piece){piece.teleported=true;}}if(dx===2){var _piece=boardState.find(function(p){return p.x===7&&p.y===0;});if(_piece){_piece.teleported=true;}}}if(activePlayer===TeamType.BLACK){if(dx===-2){var _piece2=boardState.find(function(p){return p.x===0&&p.y===7;});if(_piece2){_piece2.teleported=true;}}if(dx===2){var _piece3=boardState.find(function(p){return p.x===7&&p.y===7;});if(_piece3){_piece3.teleported=true;}}}this.endMove(px,py,x,y,team,boardState,valid);}break;}}return valid.value;}}]);return Referee;}();\n// CONCATENATED MODULE: ./src/components/chessboard/chessboard.tsx\nfunction Chessboard(){var _useState=Object(react[\"useState\"])(null),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),activePiece=_useState2[0],setActivePiece=_useState2[1];var _useState3=Object(react[\"useState\"])(0),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),gridX=_useState4[0],setGridX=_useState4[1];var _useState5=Object(react[\"useState\"])(0),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),gridY=_useState6[0],setGridY=_useState6[1];var _useState7=Object(react[\"useState\"])(initialBoardState),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),pieces=_useState8[0],setPieces=_useState8[1];var _useState9=Object(react[\"useState\"])(TeamType.WHITE),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),activePlayer=_useState10[0],setActivePlayer=_useState10[1];var chessboardRef=Object(react[\"useRef\"])(null);var referee=new Referee_Referee();var checker=new boardChecks_Checker();function switchPlayer(){var nextPlayer=activePlayer===TeamType.WHITE?TeamType.BLACK:TeamType.WHITE;setActivePlayer(nextPlayer);}function deepCopy(){var oldBoardState=[];pieces.forEach(function(p){return oldBoardState.push({image:p.image,x:p.x,y:p.y,team:p.team,type:p.type,enPassantable:p.enPassantable});});return oldBoardState;}function revert(){if(activePiece){activePiece.style.position='relative';activePiece.style.removeProperty('left');activePiece.style.removeProperty('top');}}function takePiece(p){var id2=pieces.indexOf(p);pieces.splice(id2,1);}function teleportPiece(p){var tele=0;if(p.x===7){tele=-2;}else{tele=3;}p.x=p.x+tele;p.teleported=false;}function grabPiece(e){var chessboard=chessboardRef.current;var element=e.target;if(element.classList.contains('chess-piece')&&chessboard){setGridX(Math.floor((e.clientX-chessboard.offsetLeft)/GRID_SIZE));setGridY(Math.abs(Math.ceil((e.clientY-chessboard.offsetTop-8*GRID_SIZE)/GRID_SIZE)));var x=e.clientX-GRID_SIZE/2;var y=e.clientY- -GRID_SIZE/2;element.style.position='absolute';element.style.left=\"\".concat(x,\"px\");element.style.top=\"\".concat(y,\"px\");setActivePiece(element);}}function movePiece(e){var chessboard=chessboardRef.current;if(activePiece&&chessboard){var x=e.clientX-GRID_SIZE/2;var y=e.clientY-GRID_SIZE/2;activePiece.style.position='absolute';activePiece.style.left=\"\".concat(x,\"px\");activePiece.style.top=\"\".concat(y,\"px\");}}function dropPiece(e){var chessboard=chessboardRef.current;if(activePiece&&chessboard){var x=Math.floor((e.clientX-chessboard.offsetLeft)/GRID_SIZE);var y=Math.abs(Math.ceil((e.clientY-chessboard.offsetTop-8*GRID_SIZE)/GRID_SIZE));var currentPiece=pieces.find(function(p){return p.x===gridX&&p.y===gridY;});if(currentPiece){var oldBoardState=deepCopy();var validMove=referee.isValidMove(gridX,gridY,x,y,currentPiece.type,currentPiece.team,pieces,activePlayer);if(validMove){// leave this here in case I find a bug setPieces(pieces)\nvar takenPiece=pieces.find(function(p){return p.taken===true;});if(takenPiece){takePiece(takenPiece);}var teleportedPiece=pieces.find(function(p){return p.teleported===true;});if(teleportedPiece){teleportPiece(teleportedPiece);}var id1=pieces.indexOf(currentPiece);currentPiece.x=x;currentPiece.y=y;pieces[id1]=currentPiece;if(checker.isMyKingInCheck(currentPiece.team,pieces,0)){setPieces(oldBoardState);revert();}else{setPieces(pieces);switchPlayer();}}else{revert();}}}setActivePiece(null);}var board=[];var _loop=function _loop(j){var _loop2=function _loop2(i){var number=i+j;var piece=pieces.find(function(p){return p.x===i&&p.y===j;});var image=piece?piece.image:undefined;board.push(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Tile,{image:image,number:number},\"\".concat(i,\", \").concat(j)));};for(var i=0;i<HORIZONTAL_AXIS.length;i++){_loop2(i);}};for(var j=VERTICAL_AXIS.length-1;j>=0;j--){_loop(j);}return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{ref:chessboardRef,onMouseUp:function onMouseUp(e){return dropPiece(e);},onMouseMove:function onMouseMove(e){return movePiece(e);},onMouseDown:function onMouseDown(e){return grabPiece(e);},id:\"chessboard\",children:board});}\n// CONCATENATED MODULE: ./src/App.tsx\n// TODO\n// Clean Up Code, Queening, Checkmate, Comment, Make Multiplayer, Fix screen Glitch\nfunction App_App(){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{id:\"App\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Chessboard,{})});}/* harmony default export */ var src_App = (App_App);\n// CONCATENATED MODULE: ./src/reportWebVitals.ts\nvar reportWebVitals=function reportWebVitals(onPerfEntry){if(onPerfEntry&&onPerfEntry instanceof Function){__webpack_require__.e(/* import() */ 3).then(__webpack_require__.bind(null, 17)).then(function(_ref){var getCLS=_ref.getCLS,getFID=_ref.getFID,getFCP=_ref.getFCP,getLCP=_ref.getLCP,getTTFB=_ref.getTTFB;getCLS(onPerfEntry);getFID(onPerfEntry);getFCP(onPerfEntry);getLCP(onPerfEntry);getTTFB(onPerfEntry);});}};/* harmony default export */ var src_reportWebVitals = (reportWebVitals);\n// CONCATENATED MODULE: ./src/index.tsx\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})}),document.getElementById('root'));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nsrc_reportWebVitals();\n\n/***/ })\n],[[16,1,2]]]);","inputSourceMap":{"version":3,"sources":["/home/jaybird/Coding Projects/Chess4/chess/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/jaybird/Coding Projects/Chess4/chess/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/jaybird/Coding Projects/Chess4/chess/node_modules/postcss-loader/src/index.js??postcss!/home/jaybird/Coding Projects/Chess4/chess/src/index.css","/home/jaybird/Coding Projects/Chess4/chess/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/jaybird/Coding Projects/Chess4/chess/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/jaybird/Coding Projects/Chess4/chess/node_modules/postcss-loader/src/index.js??postcss!/home/jaybird/Coding Projects/Chess4/chess/src/App.css","/home/jaybird/Coding Projects/Chess4/chess/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/jaybird/Coding Projects/Chess4/chess/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/jaybird/Coding Projects/Chess4/chess/node_modules/postcss-loader/src/index.js??postcss!/home/jaybird/Coding Projects/Chess4/chess/src/components/Tile/tile.css","/home/jaybird/Coding Projects/Chess4/chess/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/home/jaybird/Coding Projects/Chess4/chess/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/home/jaybird/Coding Projects/Chess4/chess/node_modules/postcss-loader/src/index.js??postcss!/home/jaybird/Coding Projects/Chess4/chess/src/components/chessboard/chessboard.css","/home/jaybird/Coding Projects/Chess4/chess/src/components/Tile/Tile.tsx","/home/jaybird/Coding Projects/Chess4/chess/src/constants.ts","/home/jaybird/Coding Projects/Chess4/chess/src/referee/pawnLogic.ts","/home/jaybird/Coding Projects/Chess4/chess/src/referee/boardChecks.ts","/home/jaybird/Coding Projects/Chess4/chess/src/referee/pieceLogic.ts","/home/jaybird/Coding Projects/Chess4/chess/src/referee/Referee.ts","/home/jaybird/Coding Projects/Chess4/chess/src/components/chessboard/chessboard.tsx","/home/jaybird/Coding Projects/Chess4/chess/src/App.tsx","/home/jaybird/Coding Projects/Chess4/chess/src/reportWebVitals.ts","/home/jaybird/Coding Projects/Chess4/chess/src/index.tsx"],"names":["Tile","number","image","backgroundImage","HORIZONTAL_AXIS","VERTICAL_AXIS","GRID_SIZE","TeamType","PieceType","initialBoardState","p","type","team","BLACK","WHITE","y","push","x","ROOK","enPassantable","canCastle","NIGHT","BISHOP","QUEEN","KING","i","length","PAWN","pawnIsBlockaded","boardState","piece","find","occupied","checkEnPassant","setEnPassant","px","py","forEach","unsetEnPassant","isFriendlyPiece","isPawnStartingMove","startingRow","increment","isPawnNormalMove","enemyTeam","isEnPassant","Checker","myKing","dx","dy","isLegalNightMove","isLegalBishopMove","isLegalRookMove","isLegalQueenMove","isLegalKingMove","y_dir","Math","sign","obstructingPiece","abs","x_dir","legality","isCastleMove","checker","king","rook","isMyKingInCheck","Referee","taken","valid","noCastle","takePiece","value","activePlayer","endMove","teleported","Chessboard","useState","activePiece","setActivePiece","gridX","setGridX","gridY","setGridY","pieces","setPieces","setActivePlayer","chessboardRef","useRef","referee","switchPlayer","nextPlayer","deepCopy","oldBoardState","revert","style","position","removeProperty","id2","indexOf","splice","teleportPiece","tele","grabPiece","e","chessboard","current","element","target","classList","contains","floor","clientX","offsetLeft","ceil","clientY","offsetTop","left","top","movePiece","dropPiece","currentPiece","validMove","isValidMove","takenPiece","teleportedPiece","id1","board","j","undefined","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","import './tile.css'\n\ninterface Props {\n    number : number;\n    image? : string;\n}\n\n\nexport default function Tile({number, image}: Props){\n    if (number % 2 === 0){\n        return <div className = 'tile black-tile'>\n        {image && <div style = {{backgroundImage : `url(${image})`}} className = 'chess-piece'></div>}\n        </div>\n    } else{\n        return <div className = 'tile white-tile'> \n        {image && <div style = {{backgroundImage : `url(${image})`}} className = 'chess-piece'></div>}\n        </div>\n    }\n    \n}","export const HORIZONTAL_AXIS = ['a', 'b', 'c', 'd', 'e', 'f',   'g', 'h'];\nexport const VERTICAL_AXIS = [1,2,3,4,5,6,7,8];\nexport const GRID_SIZE = 100\n\nexport interface Piece {\n    image: string;\n    x : number; \n    y : number; \n    type : PieceType;\n    team : TeamType;\n    enPassantable? : boolean;\n    taken? : boolean;\n    teleported? : boolean;\n    canCastle? : boolean;\n}\n\nexport enum TeamType{\n    WHITE,\n    BLACK\n}\n\nexport enum PieceType {\n    PAWN,\n    BISHOP, \n    NIGHT, \n    ROOK,\n    QUEEN,\n    KING,\n}\n\nexport const initialBoardState : Piece[] = [];\n\nfor (let p = 0; p < 2; p ++){\n    const type = p === 0 ? 'b': 'w';\n    const team = p === 0 ? TeamType.BLACK : TeamType.WHITE;\n    const y = p === 0 ?  7 : 0;\n    // Rooks\n    initialBoardState.push({image : `assets/images/rook_${type}.png`, x : 0,  y, team, type : PieceType.ROOK, enPassantable : false, canCastle : true})\n    initialBoardState.push({image : `assets/images/rook_${type}.png`, x : 7,  y, team, type : PieceType.ROOK, enPassantable : false, canCastle : true})\n\n    // Nights\n    initialBoardState.push({image : `assets/images/night_${type}.png`, x : 1,  y, team, type : PieceType.NIGHT, enPassantable : false})\n    initialBoardState.push({image : `assets/images/night_${type}.png`, x : 6,  y, team, type : PieceType.NIGHT, enPassantable : false})\n\n    // Bishops\n    initialBoardState.push({image : `assets/images/bishop_${type}.png`, x : 2,  y, team, type : PieceType.BISHOP, enPassantable : false})\n    initialBoardState.push({image : `assets/images/bishop_${type}.png`, x : 5,  y, team, type : PieceType.BISHOP, enPassantable : false})\n\n    // Queens\n    initialBoardState.push({image : `assets/images/queen_${type}.png`, x : 3,  y, team, type : PieceType.QUEEN, enPassantable : false})\n    // Kings\n    initialBoardState.push({image : `assets/images/king_${type}.png`, x : 4,  y, team, type : PieceType.KING, enPassantable : false, canCastle : true})\n\n}\n\n// Pawns\nfor (let i = 0; i < HORIZONTAL_AXIS.length; i++){\n    initialBoardState.push({image : 'assets/images/pawn_b.png', x : i, y : 6, team : TeamType.BLACK, type : PieceType.PAWN, enPassantable : false})\n}\nfor (let i = 0; i < HORIZONTAL_AXIS.length; i++){\n    initialBoardState.push({image : 'assets/images/pawn_w.png', x : i, y : 1, team : TeamType.WHITE, type : PieceType.PAWN, enPassantable : false})\n}","import { Piece, TeamType } from '../constants'\n\nfunction pawnIsBlockaded(x : number, y: number, boardState : Piece []): boolean {\n    const piece = boardState.find(p => p.x === x && p.y === y) \n    const occupied =  piece ? true : false\n    return occupied\n}\n\nfunction checkEnPassant (x : number, y : number, boardState : Piece []) : boolean {\n    const piece = boardState.find(p => p.x === x && p.y === y)\n    if (piece && piece.enPassantable){\n        return piece.enPassantable  \n    } return false\n}\n\n\n\n\nexport function setEnPassant(px : number, py : number, boardState : Piece []){\n        boardState.forEach(p => {\n            if (p.x === px && p.y === py){\n                p.enPassantable = true\n            } else{\n                p.enPassantable = false\n            }\n        })\n    }\n\nexport function unsetEnPassant( boardState : Piece []){\n    boardState.forEach(p => {\n            p.enPassantable = false\n    })\n}\n\nexport function isFriendlyPiece(x : number, y: number, team : TeamType, boardState : Piece []): boolean {\n    const piece = boardState.find(p => p.x === x && p.y === y)\n    const occupied =  piece && piece.team === team ? true : false\n    return occupied\n}\n\nexport function isPawnStartingMove(px : number, py : number, x : number, y : number, \n                                    team : TeamType, boardState : Piece []):boolean{\n    const startingRow = team === TeamType.WHITE ? 1 : 6\n    const increment = team === TeamType.WHITE ? 1 : - 1\n    if ((py === startingRow && px === x) && (py === y - 2 * increment)){\n        if (!pawnIsBlockaded(x, y, boardState) && !pawnIsBlockaded(x, y - increment, boardState)){\n            return true\n        }\n    } return false\n}\n\nexport function isPawnNormalMove(px : number, py : number, x : number, y : number, \n                                team : TeamType, boardState : Piece []): boolean{\n    const enemyTeam = team === TeamType.WHITE ? TeamType.BLACK : TeamType.WHITE\n    const increment = team === TeamType.WHITE ? 1 : - 1\n    if (py === y - increment && px === x){\n        if (!pawnIsBlockaded(x, y, boardState)){\n            return true;\n        } \n    }\n    if ((x === px + 1 || x === px -1) && (py === y - increment) && isFriendlyPiece(x, y, enemyTeam, boardState)) {\n        return true\n    } \n    return false \n} \n\n\nexport function isEnPassant(px : number, py : number, x : number, y : number,\n                                 team : TeamType, boardState : Piece []): boolean{\n    const enemyTeam = team === TeamType.WHITE ? TeamType.BLACK : TeamType.WHITE\n    const increment = team === TeamType.WHITE ? 1 : - 1\n    if ((x === px + 1 || x === px -1) && (py === y - increment) && isFriendlyPiece(x, py, enemyTeam, boardState)) {\n        if (checkEnPassant(x, py, boardState)){\n            return true\n        }\n    }\n    return false\n}","import { PieceType, TeamType, Piece } from \"../constants\"\nimport { isLegalBishopMove, isLegalRookMove, isLegalQueenMove, isLegalKingMove, isLegalNightMove} from \"./pieceLogic\"\nimport { isPawnNormalMove } from \"./pawnLogic\"\n\nexport default class Checker{\n    isMyKingInCheck(team : TeamType, boardState : Piece [], increment : number) : boolean {\n    const enemyTeam = team === TeamType.WHITE ? TeamType.BLACK : TeamType.WHITE\n    const myKing = boardState.find(p => p.team === team && p.type === PieceType.KING) \n    for (let i = 0; i < boardState.length; i++){\n        const p = boardState[i];\n        if (myKing && p.team === enemyTeam) {\n            const dx = myKing.x + increment - p.x\n            const dy = myKing.y - p.y\n            switch (p.type){\n                case PieceType.PAWN : {\n                    if (isPawnNormalMove(p.x, p.y, myKing.x + increment, myKing.y, p.team, boardState)){\n                        return true;\n                    } break;\n                }\n                case PieceType.NIGHT : {\n                    if (isLegalNightMove(p.x, p.y, dx, dy, boardState)){\n                        return true;\n                    } break;\n                }\n                case PieceType.BISHOP : {\n                    if (isLegalBishopMove(p.x, p.y, dx, dy, boardState)){\n                        return true;\n                    } break;\n                }\n                case PieceType.ROOK : {\n                    if (isLegalRookMove(p.x, p.y, dx, dy, boardState)){\n                        return true;\n                    } break;\n                }\n                case PieceType.QUEEN : {\n                    if (isLegalQueenMove(p.x, p.y, dx, dy, boardState)){\n                        return true;\n                    } break;\n                }\n                case PieceType.KING : {\n                    if (isLegalKingMove(p.x, p.y, dx, dy, boardState)){\n                        return true;\n                    } break;\n                }\n            }\n\n        }\n    }\n    return false\n}\n}","import { Piece , PieceType, TeamType} from '../constants'\nimport Checker from './boardChecks'\n\nexport function isLegalRookMove(px : number, py : number, dx : number, dy : number, boardState : Piece[]) : boolean {\n    if (dx === 0 || dy === 0){\n        if (dx === 0){\n            const y_dir = Math.sign(dy)\n            for (let i = 1; i < Math.abs(dy); i ++){\n                const obstructingPiece = boardState.find(p => p.x === px && p.y === py + i*y_dir) \n                if (obstructingPiece){\n                    return false\n                }\n            } \n            return true\n        }\n        if (dy === 0){\n            const x_dir = Math.sign(dx)\n            for (let i = 1; i < Math.abs(dx); i ++){\n                const obstructingPiece = boardState.find(p => p.x === px + i*x_dir && p.y === py) \n                if (obstructingPiece){\n                    return false\n                }\n            } \n            return true\n        }\n    } \n    return false;\n}\n\nexport function isLegalBishopMove(px : number, py : number, dx : number, dy : number, boardState : Piece[]) : boolean{\n    if (Math.abs(dx) === Math.abs(dy)){\n        const x_dir = Math.sign(dx)\n        const y_dir = Math.sign(dy)\n        for (let i = 1; i < Math.abs(dx); i ++){\n            const obstructingPiece = boardState.find(p => p.x === px + i*x_dir && p.y === py + i*y_dir) \n            if (obstructingPiece){\n                return false\n            }\n        } \n        return true\n    } \n    return false\n}\nexport function isLegalNightMove(px : number, py : number, dx : number, dy : number, boardState : Piece[]) : boolean{\n    if ((Math.abs(dx) === 1 && Math.abs(dy) === 2) || (Math.abs(dx) === 2 && Math.abs(dy) === 1)){\n        return true\n    }\n    return false\n}\nexport function isLegalQueenMove(px : number, py : number, dx : number, dy : number, boardState : Piece[]) : boolean{\n    const legality = isLegalRookMove(px, py, dx, dy, boardState) || isLegalBishopMove(px, py, dx, dy, boardState)\n    return legality\n}\n\n\nexport function isLegalKingMove(px : number, py : number, dx : number, dy : number, boardState : Piece[]) : boolean{\n    if (Math.abs(dx) < 2 && Math.abs(dy) < 2){\n        return true\n    } \n    return false\n}\n\nexport function isCastleMove(px : number, py : number, dx : number, dy : number, team : TeamType,\n                            boardState : Piece[]) : boolean{\n    const checker = new Checker();\n    const king = boardState.find(p => p.type === PieceType.KING && p.team === team)\n    if (team === TeamType.WHITE){\n        if (king?.canCastle === true && dx === - 2){\n            const rook = boardState.find(p => p.x === 0 && p.y === 0)\n            if (rook?.canCastle){\n                if (!checker.isMyKingInCheck(team, boardState, 0) && \n                    !checker.isMyKingInCheck(team, boardState, -1) &&\n                    !checker.isMyKingInCheck(team, boardState, -2)){\n                        if (isLegalRookMove(king.x, king.y, -4, 0, boardState)){\n                            return true\n                        }\n                }\n            }\n        } \n        if (king?.canCastle === true && dx === 2){\n            const rook = boardState.find(p => p.x === 7 && p.y === 0)\n            if (rook?.canCastle){\n                if (!checker.isMyKingInCheck(team, boardState, 0) && \n                    !checker.isMyKingInCheck(team, boardState, 1) &&\n                    !checker.isMyKingInCheck(team, boardState, 2)){\n                        if (isLegalRookMove(king.x, king.y, 3, 0, boardState)){\n                            return true\n                        }\n                }\n            }\n        } \n    }\n    if (team === TeamType.BLACK){\n        if (king?.canCastle === true && dx === - 2){\n            const rook = boardState.find(p => p.x === 0 && p.y === 7)\n            if (rook?.canCastle){\n                if (!checker.isMyKingInCheck(team, boardState, 0) && \n                    !checker.isMyKingInCheck(team, boardState, -1) &&\n                    !checker.isMyKingInCheck(team, boardState, -2)){\n                        if (isLegalRookMove(king.x, king.y, -4, 0, boardState)){\n                            return true\n                        }\n                }\n            }\n        } \n        if (king?.canCastle === true && dx === 2){\n            const rook = boardState.find(p => p.x === 7 && p.y === 7)\n            if (rook?.canCastle){\n                if (!checker.isMyKingInCheck(team, boardState, 0) && \n                    !checker.isMyKingInCheck(team, boardState, 1) &&\n                    !checker.isMyKingInCheck(team, boardState, 2)){\n                        if (isLegalRookMove(king.x, king.y, 3, 0, boardState)){\n                            return true\n                        }\n                    return true\n                }\n            }\n        } \n    }\n    return false\n}","\nimport { PieceType, TeamType, Piece, } from \"../constants\"\nimport { isPawnNormalMove, isEnPassant, isPawnStartingMove, isFriendlyPiece, unsetEnPassant, setEnPassant } from \"./pawnLogic\"\nimport { isLegalBishopMove, isLegalRookMove, isLegalQueenMove, isLegalKingMove, isLegalNightMove, isCastleMove} from \"./pieceLogic\"\n\nexport default class Referee{\n    noCastle(px: number, py: number, boardState : Piece []){\n        const piece = boardState.find(p => p.x === px && p.y === py)\n        if (piece){\n            piece.canCastle = false\n        }\n    }\n    takePiece(x : number, y: number, team : TeamType, boardState : Piece []){\n        const piece = boardState.find(p => p.x === x && p.y === y && p.team !== team)  \n                if (piece) {\n            piece.taken = true\n        }\n    }\n    endMove(px : number, py : number, x : number, y: number, team : TeamType, boardState : Piece [], \n            valid : any){\n        if (!isFriendlyPiece(x, y, team, boardState)){\n            this.noCastle(px, py, boardState)\n            this.takePiece(x, y, team, boardState)\n            unsetEnPassant(boardState)\n            valid.value = true          \n        }\n    }\n    isValidMove(px : number, py : number, x : number, y : number, type : PieceType, \n                team : TeamType, boardState : Piece [], activePlayer : TeamType) : boolean{\n        // Only the active player can move\n        if (team !== activePlayer){\n            return false\n        }\n        // A non-move is not a move\n        if (px === x && py === y){\n            return false\n        }\n        // A move off the board is not a move\n        if (x < 0 || y < 0 || x > 7 || y > 7){\n            return false\n        }\n        var valid = { value: false }\n        const dx = x - px\n        const dy = y - py\n\n        switch(type){\n            case PieceType.PAWN : {\n                if (isPawnStartingMove(px, py, x, y, team, boardState)){\n                    setEnPassant(px, py, boardState)\n                    return true\n                }\n                if (isPawnNormalMove(px, py, x, y, team, boardState)){\n                    this.endMove(px, py, x, y, team, boardState, valid)\n                }\n                if (isEnPassant(px, py, x, y, team, boardState)){\n                    this.endMove(-1, -1, x, py, team, boardState, valid)\n                }\n                break;\n            }\n            case PieceType.NIGHT : {\n                if (isLegalNightMove(px, py, dx, dy, boardState)){\n                    this.endMove(px, py, x, y, team, boardState, valid)\n                }\n                break;\n            }\n            case PieceType.BISHOP : {\n                if (isLegalBishopMove(px, py, dx, dy, boardState)){\n                    this.endMove(px, py, x, y, team, boardState, valid)\n                }\n                break;\n            }\n            case PieceType.ROOK : {\n                if (isLegalRookMove(px, py, dx, dy, boardState)){\n                    this.endMove(px, py, x, y, team, boardState, valid)\n                }\n                break;\n            }\n            case PieceType.QUEEN : {\n                if (isLegalQueenMove(px, py, dx, dy, boardState)){\n                    this.endMove(px, py, x, y, team, boardState, valid)\n                }\n                break;\n            }\n            case PieceType.KING : {\n                if (isLegalKingMove(px, py, dx, dy, boardState)){\n                    this.endMove(px, py, x, y, team, boardState, valid)\n                }\n                if (isCastleMove(px, py, dx, dy, activePlayer, boardState)){\n                    if (activePlayer === TeamType.WHITE){\n                        if (dx === -2){ \n                            const piece = boardState.find(p => p.x === 0 && p.y === 0)\n                            if (piece){\n                                piece.teleported = true\n                            }\n                        }\n                        if (dx === 2){ \n                            const piece = boardState.find(p => p.x === 7 && p.y === 0)\n                            if (piece){\n                                piece.teleported = true\n                            }\n                        }\n                    }\n                    if (activePlayer === TeamType.BLACK){\n                        if (dx === -2){ \n                            const piece = boardState.find(p => p.x === 0 && p.y === 7)\n                            if (piece){\n                                piece.teleported = true\n                            }\n                        }\n                        if (dx === 2){ \n                            const piece = boardState.find(p => p.x === 7 && p.y === 7)\n                            if (piece){\n                                piece.teleported = true\n                            }\n                        }\n                    }\n                this.endMove(px, py, x, y, team, boardState, valid)\n                }\n            break;\n            }\n        }\n    return valid.value\n    }\n}","import React, {useRef, useState } from 'react';\nimport Tile from '../Tile/Tile';\nimport './chessboard.css';\nimport Referee from '../../referee/Referee'\nimport {VERTICAL_AXIS, HORIZONTAL_AXIS, GRID_SIZE, Piece, TeamType, initialBoardState} from '../../constants'\nimport Checker from '../../referee/boardChecks'\n\nexport default function Chessboard(){\n    const [activePiece, setActivePiece] = useState<HTMLElement | null>(null) \n    const [gridX, setGridX] = useState(0);\n    const [gridY, setGridY] = useState(0);\n    const [pieces, setPieces]  = useState<Piece[]>(initialBoardState);\n    const [activePlayer, setActivePlayer] = useState<TeamType>(TeamType.WHITE);\n    const chessboardRef = useRef<HTMLDivElement>(null);\n    const referee = new Referee();\n    const checker = new Checker();\n\n\n    function switchPlayer(){\n        const nextPlayer = activePlayer === TeamType.WHITE ? TeamType.BLACK : TeamType.WHITE\n        setActivePlayer(nextPlayer) \n    }\n    function deepCopy() : Piece [] {\n        const oldBoardState : Piece[] = [];\n        pieces.forEach(p => oldBoardState.push({image : p.image, x : p.x,  y : p.y, team : p.team, type : p.type, enPassantable : p.enPassantable}))\n        return oldBoardState\n    }\n\n    function revert(){\n        if (activePiece){\n            activePiece.style.position = 'relative';\n            activePiece.style.removeProperty('left');\n            activePiece.style.removeProperty('top');\n        }\n    }\n\n    function takePiece(p : Piece){\n        const id2 = pieces.indexOf(p)\n        pieces.splice(id2, 1)\n    }\n    function teleportPiece(p : Piece){\n        let tele = 0;\n        if (p.x === 7){  \n            tele = -2\n        } else {\n            tele = 3\n        }\n        p.x = p.x + tele\n        p.teleported = false\n    }\n\n    function grabPiece(e: React.MouseEvent){\n        const chessboard = chessboardRef.current\n        const element = e.target as HTMLElement\n        if (element.classList.contains('chess-piece') && chessboard){\n            setGridX(Math.floor((e.clientX - chessboard.offsetLeft)/GRID_SIZE));\n            setGridY(Math.abs(Math.ceil((e.clientY - chessboard.offsetTop - 8 * GRID_SIZE)/GRID_SIZE)));\n            const x = e.clientX - GRID_SIZE/2;\n            const y = e.clientY - -GRID_SIZE/2;\n            element.style.position = 'absolute'; \n            element.style.left = `${x}px`;\n            element.style.top = `${y}px`;\n            setActivePiece(element)    \n        }\n    \n    }\n    \n    function movePiece(e: React.MouseEvent){\n        const chessboard = chessboardRef.current\n        if (activePiece && chessboard){\n            const x = e.clientX - GRID_SIZE/2;\n            const y = e.clientY - GRID_SIZE/2;\n            activePiece.style.position = 'absolute'; \n            activePiece.style.left = `${x}px`;\n            activePiece.style.top = `${y}px`;\n        }\n    }\n    \n    function dropPiece(e: React.MouseEvent){\n        const chessboard = chessboardRef.current;\n        if (activePiece && chessboard){\n            const x = Math.floor((e.clientX - chessboard.offsetLeft)/GRID_SIZE);\n            const y = Math.abs(Math.ceil((e.clientY - chessboard.offsetTop - 8 * GRID_SIZE)/GRID_SIZE))\n            const currentPiece = pieces.find(p => p.x === gridX && p.y === gridY)\n            if (currentPiece){\n                const oldBoardState = deepCopy()\n                const validMove = referee.isValidMove(gridX, gridY, x, y, currentPiece.type, currentPiece.team, pieces, activePlayer);                \n                if (validMove){\n                    // leave this here in case I find a bug setPieces(pieces)\n                    const takenPiece = pieces.find(p => p.taken === true)\n                    if (takenPiece){\n                        takePiece(takenPiece)\n                    }\n                    const teleportedPiece = pieces.find(p => p.teleported === true)\n                    if (teleportedPiece){\n                        teleportPiece(teleportedPiece)\n                    }\n                    const id1 = pieces.indexOf(currentPiece)\n                    currentPiece.x = x\n                    currentPiece.y = y\n                    pieces[id1] = currentPiece\n                    if (checker.isMyKingInCheck(currentPiece.team, pieces, 0)){\n                        setPieces(oldBoardState)\n                        revert()\n                    } else {\n                        setPieces(pieces)\n                        switchPlayer()\n                    }\n                } else {\n                revert()\n                }\n            }\n        }\n        setActivePiece(null);\n    }\n\n\n    let board = [];\n    for (let j = VERTICAL_AXIS.length - 1; j >= 0; j-- ){\n        for (let i = 0; i < HORIZONTAL_AXIS.length; i++ ) {\n            const number = i + j;\n            const piece = pieces.find(p => p.x === i && p.y === j) \n            let image = piece ? piece.image : undefined\n            board.push(<Tile key = {`${i}, ${j}`} image = {image} number = {number}/>);\n        }\n    }\n    return <div \n    ref = {chessboardRef} \n    onMouseUp = {e => dropPiece(e)} \n    onMouseMove = {e => movePiece(e)} \n    onMouseDown = {e => grabPiece(e)} \n    id = 'chessboard'>{board}</div>;\n}","// TODO\n// Clean Up Code, Queening, Checkmate, Comment, Make Multiplayer, Fix screen Glitch\n\n\nimport './App.css';\nimport Chessboard from './components/chessboard/chessboard';\n\n\nfunction App() {\n  return (\n    <div id = 'App'>\n      <Chessboard></Chessboard>\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"]}}